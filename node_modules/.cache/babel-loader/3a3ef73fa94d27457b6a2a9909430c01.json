{"ast":null,"code":"import _objectSpread from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback}from'react';import{createUseStyles}from'react-jss';import{AnimatePresence,motion}from'framer-motion';import{DEFAULT_SPRING_TYPE as spring}from'../../../../../../../utils/framer_motion/common_types/spring_type';import{useFormikContext}from'formik';import{Tooltip}from'@welovedevs/ui';import{useIsEditing}from'../../../../../../hooks/use_is_editing';import{useOpenerState}from'../../../../../../hooks/use_opener_state';import{ReactComponent as DeleteIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../../../../../assets/icons/trash.svg\";import{styles}from'./project_dialog_content_image_styles';import{OPACITY_TRANSITIONS}from'../../../../../../../utils/framer_motion/common_transitions/opacity_transitions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=createUseStyles(styles);var ProjectDialogContentImageComponent=function ProjectDialogContentImageComponent(_ref){var _ref$component=_ref.component,Component=_ref$component===void 0?'div':_ref$component,url=_ref.url,name=_ref.name,motionConfig=_ref.motionConfig,handleImageClick=_ref.handleImageClick;var classes=useStyles();var _useIsEditing=useIsEditing(),_useIsEditing2=_slicedToArray(_useIsEditing,1),isEditing=_useIsEditing2[0];var _useOpenerState=useOpenerState(),_useOpenerState2=_slicedToArray(_useOpenerState,2),showEditLayer=_useOpenerState2[0],eventsHandlerElementProps=_useOpenerState2[1];return/*#__PURE__*/_jsxs(Component,_objectSpread(_objectSpread(_objectSpread({className:classes.container},motionConfig),isEditing&&eventsHandlerElementProps),{},{children:[/*#__PURE__*/_jsx(Image,{url:url,name:name,handleImageClick:handleImageClick,isEditing:isEditing,classes:classes}),/*#__PURE__*/_jsx(AnimatePresence,{children:showEditLayer&&/*#__PURE__*/_jsx(EditLayer,{motionConfig:{variants:OPACITY_TRANSITIONS,initial:'initial',animate:'animate',exit:'exit',transition:spring},classes:classes,url:url})})]}));};var Image=function Image(_ref2){var url=_ref2.url,name=_ref2.name,handleImageClick=_ref2.handleImageClick,isEditing=_ref2.isEditing,classes=_ref2.classes;if(!isEditing){return/*#__PURE__*/_jsx(\"button\",{className:classes.button,type:\"button\",onClick:handleImageClick,children:/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:url,alt:\"Project \".concat(name)})});}return/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:url,alt:\"Project \".concat(name)});};var EditLayer=function EditLayer(_ref3){var classes=_ref3.classes,url=_ref3.url,motionConfig=_ref3.motionConfig;var _useFormikContext=useFormikContext(),setFieldValue=_useFormikContext.setFieldValue,values=_useFormikContext.values;var deleteImage=useCallback(function(){setFieldValue('images',values.images.filter(function(_ref4){var urlToKeep=_ref4.url;return url!==urlToKeep;}));},[setFieldValue,values.images]);return/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({className:classes.editLayer},motionConfig),{},{children:/*#__PURE__*/_jsx(Tooltip,{title:\"Supprimer cette image\",children:/*#__PURE__*/_jsx(\"button\",{className:classes.deleteButton,type:\"button\",onClick:deleteImage,children:/*#__PURE__*/_jsx(DeleteIcon,{className:classes.deleteIcon})})})}));};export var ProjectDialogContentImage=ProjectDialogContentImageComponent;","map":{"version":3,"sources":["/home/gzamora/Documents/test/react-ultimate-resume/src/package/components/cards/cards_types/projects/project_dialog/project_dialog_content_images/project_dialog_content_image/project_dialog_content_image.jsx"],"names":["React","useCallback","createUseStyles","AnimatePresence","motion","DEFAULT_SPRING_TYPE","spring","useFormikContext","Tooltip","useIsEditing","useOpenerState","styles","OPACITY_TRANSITIONS","useStyles","ProjectDialogContentImageComponent","component","Component","url","name","motionConfig","handleImageClick","classes","isEditing","showEditLayer","eventsHandlerElementProps","container","variants","initial","animate","exit","transition","Image","button","image","EditLayer","setFieldValue","values","deleteImage","images","filter","urlToKeep","editLayer","deleteButton","deleteIcon","ProjectDialogContentImage"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\n\nimport { createUseStyles } from 'react-jss';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { DEFAULT_SPRING_TYPE as spring } from '../../../../../../../utils/framer_motion/common_types/spring_type';\n\nimport { useFormikContext } from 'formik';\nimport { Tooltip } from '@welovedevs/ui';\n\nimport { useIsEditing } from '../../../../../../hooks/use_is_editing';\nimport { useOpenerState } from '../../../../../../hooks/use_opener_state';\n\nimport { ReactComponent as DeleteIcon } from '../../../../../../../assets/icons/trash.svg';\n\nimport { styles } from './project_dialog_content_image_styles';\nimport { OPACITY_TRANSITIONS } from '../../../../../../../utils/framer_motion/common_transitions/opacity_transitions';\n\nconst useStyles = createUseStyles(styles);\n\nconst ProjectDialogContentImageComponent = ({\n    component: Component = 'div',\n    url,\n    name,\n    motionConfig,\n    handleImageClick\n}) => {\n    const classes = useStyles();\n    const [isEditing] = useIsEditing();\n\n    const [showEditLayer, eventsHandlerElementProps] = useOpenerState();\n\n    return (\n        <Component className={classes.container} {...motionConfig} {...(isEditing && eventsHandlerElementProps)}>\n            <Image url={url} name={name} handleImageClick={handleImageClick} isEditing={isEditing} classes={classes} />\n            <AnimatePresence>\n                {showEditLayer && (\n                    <EditLayer\n                        motionConfig={{\n                            variants: OPACITY_TRANSITIONS,\n                            initial: 'initial',\n                            animate: 'animate',\n                            exit: 'exit',\n                            transition: spring\n                        }}\n                        classes={classes}\n                        url={url}\n                    />\n                )}\n            </AnimatePresence>\n        </Component>\n    );\n};\n\nconst Image = ({ url, name, handleImageClick, isEditing, classes }) => {\n    if (!isEditing) {\n        return (\n            <button className={classes.button} type=\"button\" onClick={handleImageClick}>\n                <img className={classes.image} src={url} alt={`Project ${name}`} />\n            </button>\n        );\n    }\n    return <img className={classes.image} src={url} alt={`Project ${name}`} />;\n};\n\nconst EditLayer = ({ classes, url, motionConfig }) => {\n    const { setFieldValue, values } = useFormikContext();\n\n    const deleteImage = useCallback(() => {\n        setFieldValue(\n            'images',\n            values.images.filter(({ url: urlToKeep }) => url !== urlToKeep)\n        );\n    }, [setFieldValue, values.images]);\n\n    return (\n        <motion.div className={classes.editLayer} {...motionConfig}>\n            <Tooltip title=\"Supprimer cette image\">\n                <button className={classes.deleteButton} type=\"button\" onClick={deleteImage}>\n                    <DeleteIcon className={classes.deleteIcon} />\n                </button>\n            </Tooltip>\n        </motion.div>\n    );\n};\n\nexport const ProjectDialogContentImage = ProjectDialogContentImageComponent;\n"]},"metadata":{},"sourceType":"module"}