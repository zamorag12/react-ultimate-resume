{"ast":null,"code":"import _regeneratorRuntime from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useContext,useEffect,useMemo,useState}from'react';import{createUseStyles,useTheme}from'react-jss';import{FormattedMessage}from'react-intl';import{arrayMove,SortableContainer,SortableElement,SortableHandle}from'react-sortable-hoc';import{Button,List,ListItem,Typography}from'@welovedevs/ui';import{Dialog,DialogContent,DialogActions,useMediaQuery}from'@material-ui/core';import{isEqual}from'lodash';import{DialogTitle}from'../../../../commons/dialog/dialog_title/dialog_title';import{ReactComponent as MoveIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../../../assets/icons/move_list.svg\";import{styles}from'./sort_projects_dialog_styles';import{DeveloperProfileContext}from'../../../../../utils/context/contexts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=createUseStyles(styles);export var SortProjectsDialog=function SortProjectsDialog(_ref){var open=_ref.open,onClose=_ref.onClose,projects=_ref.projects;var classes=useStyles();var theme=useTheme();var isMobile=useMediaQuery(\"(max-width: \".concat(theme.screenSizes.small,\"px)\"));var _useContext=useContext(DeveloperProfileContext),onEdit=_useContext.onEdit;var _useState=useState(projects),_useState2=_slicedToArray(_useState,2),sortedProjects=_useState2[0],setSortedProjects=_useState2[1];var saveDisabled=useMemo(function(){return isEqual(sortedProjects,projects);},[projects,sortedProjects]);useEffect(function(){setSortedProjects(projects);},[projects]);var handleSortEnd=useCallback(function(_ref2){var oldIndex=_ref2.oldIndex,newIndex=_ref2.newIndex;var newProjects=arrayMove(sortedProjects,oldIndex,newIndex).map(function(data,index){return _objectSpread(_objectSpread({},data),{},{index:index});});setSortedProjects(newProjects);},[sortedProjects]);var handleSave=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!saveDisabled){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return onEdit({projects:sortedProjects});case 4:onClose();case 5:case\"end\":return _context.stop();}}},_callee);})),[saveDisabled,onEdit,sortedProjects]);return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:onClose,fullScreen:isMobile,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Projects.SortDialog.Title\",defaultMessage:\"Sort projects\"})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(SortableProjects,{lockToContainerEdges:true,helperClass:classes.sortableHelper,onSortEnd:handleSortEnd,distance:15,useDragHandle:true,lockAxis:\"y\",items:sortedProjects,classes:classes})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:onClose,children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Main.Lang.Close\",defaultMessage:\"Close\"})}),/*#__PURE__*/_jsx(Button,{size:\"small\",color:\"primary\",onClick:handleSave,disabled:saveDisabled,children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Main.Lang.Save\",defaultMessage:\"Save\"})})]})]});};var SortableProjects=SortableContainer(function(_ref4){var _ref4$items=_ref4.items,items=_ref4$items===void 0?[]:_ref4$items,classes=_ref4.classes;return/*#__PURE__*/_jsx(List,{children:items.filter(Boolean).sort(function(_ref5,_ref6){var a=_ref5.index;var b=_ref6.index;return a-b;}).map(function(project,index){return/*#__PURE__*/_jsx(ProjectItem,{index:index,id:project===null||project===void 0?void 0:project.id,project:project,classes:classes,projectIndex:index},\"project_\".concat(project.id,\"_\").concat(index));})});});var ProjectItem=SortableElement(function(_ref7){var project=_ref7.project,classes=_ref7.classes;var theme=useTheme();var isMobile=useMediaQuery(\"(max-width: \".concat(theme.screenSizes.small,\"px)\"));return/*#__PURE__*/_jsxs(\"div\",{className:classes.projectRow,children:[/*#__PURE__*/_jsx(DragHandle,{classes:classes}),!isMobile&&/*#__PURE__*/_jsx(\"div\",{className:classes.divider}),/*#__PURE__*/_jsx(ListItem,{className:classes.listItem,children:/*#__PURE__*/_jsx(Typography,{className:classes.name,color:\"dark\",children:project===null||project===void 0?void 0:project.name})})]});});var DragHandle=SortableHandle(function(_ref8){var classes=_ref8.classes;return/*#__PURE__*/_jsx(\"button\",{className:classes.dragHandleButton,type:\"button\",children:/*#__PURE__*/_jsx(MoveIcon,{className:classes.dragHandle})});});","map":{"version":3,"sources":["/home/gzamora/Documents/test/react-ultimate-resume/src/package/components/cards/cards_types/projects/sort_projects_dialog/sort_projects_dialog.jsx"],"names":["React","useCallback","useContext","useEffect","useMemo","useState","createUseStyles","useTheme","FormattedMessage","arrayMove","SortableContainer","SortableElement","SortableHandle","Button","List","ListItem","Typography","Dialog","DialogContent","DialogActions","useMediaQuery","isEqual","DialogTitle","styles","DeveloperProfileContext","useStyles","SortProjectsDialog","open","onClose","projects","classes","theme","isMobile","screenSizes","small","onEdit","sortedProjects","setSortedProjects","saveDisabled","handleSortEnd","oldIndex","newIndex","newProjects","map","data","index","handleSave","sortableHelper","SortableProjects","items","filter","Boolean","sort","a","b","project","id","ProjectItem","projectRow","divider","listItem","name","DragHandle","dragHandleButton","dragHandle"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useEffect, useMemo, useState } from 'react';\n\nimport { createUseStyles, useTheme } from 'react-jss';\nimport { FormattedMessage } from 'react-intl';\nimport { arrayMove, SortableContainer, SortableElement, SortableHandle } from 'react-sortable-hoc';\n\nimport { Button, List, ListItem, Typography } from '@welovedevs/ui';\n\nimport { Dialog, DialogContent, DialogActions, useMediaQuery } from '@material-ui/core';\n\nimport { isEqual } from 'lodash';\nimport { DialogTitle } from '../../../../commons/dialog/dialog_title/dialog_title';\n\nimport { ReactComponent as MoveIcon } from '../../../../../assets/icons/move_list.svg';\n\nimport { styles } from './sort_projects_dialog_styles';\nimport { DeveloperProfileContext } from '../../../../../utils/context/contexts';\n\nconst useStyles = createUseStyles(styles);\n\nexport const SortProjectsDialog = ({ open, onClose, projects }) => {\n    const classes = useStyles();\n    const theme = useTheme();\n    const isMobile = useMediaQuery(`(max-width: ${theme.screenSizes.small}px)`);\n    const { onEdit } = useContext(DeveloperProfileContext);\n\n    const [sortedProjects, setSortedProjects] = useState(projects);\n\n    const saveDisabled = useMemo(() => isEqual(sortedProjects, projects), [projects, sortedProjects]);\n\n    useEffect(() => {\n        setSortedProjects(projects);\n    }, [projects]);\n\n    const handleSortEnd = useCallback(\n        ({ oldIndex, newIndex }) => {\n            const newProjects = arrayMove(sortedProjects, oldIndex, newIndex).map((data, index) => ({\n                ...data,\n                index\n            }));\n            setSortedProjects(newProjects);\n        },\n        [sortedProjects]\n    );\n\n    const handleSave = useCallback(async () => {\n        if (saveDisabled) {\n            return;\n        }\n        await onEdit({\n            projects: sortedProjects\n        });\n        onClose();\n    }, [saveDisabled, onEdit, sortedProjects]);\n\n    return (\n        <Dialog open={open} onClose={onClose} fullScreen={isMobile}>\n            <DialogTitle>\n                <FormattedMessage id=\"Projects.SortDialog.Title\" defaultMessage=\"Sort projects\" />\n            </DialogTitle>\n            <DialogContent>\n                <SortableProjects\n                    lockToContainerEdges\n                    helperClass={classes.sortableHelper}\n                    onSortEnd={handleSortEnd}\n                    distance={15}\n                    useDragHandle\n                    lockAxis=\"y\"\n                    items={sortedProjects}\n                    classes={classes}\n                />\n            </DialogContent>\n            <DialogActions>\n                <Button size=\"small\" onClick={onClose}>\n                    <FormattedMessage id=\"Main.Lang.Close\" defaultMessage=\"Close\" />\n                </Button>\n                <Button size=\"small\" color=\"primary\" onClick={handleSave} disabled={saveDisabled}>\n                    <FormattedMessage id=\"Main.Lang.Save\" defaultMessage=\"Save\" />\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nconst SortableProjects = SortableContainer(({ items = [], classes }) => (\n    <List>\n        {items\n            .filter(Boolean)\n            .sort(({ index: a }, { index: b }) => a - b)\n            .map((project, index) => (\n                <ProjectItem\n                    index={index}\n                    key={`project_${project.id}_${index}`}\n                    id={project?.id}\n                    project={project}\n                    classes={classes}\n                    projectIndex={index}\n                />\n            ))}\n    </List>\n));\n\nconst ProjectItem = SortableElement(({ project, classes }) => {\n    const theme = useTheme();\n    const isMobile = useMediaQuery(`(max-width: ${theme.screenSizes.small}px)`);\n    return (\n        <div className={classes.projectRow}>\n            <DragHandle classes={classes} />\n            {!isMobile && <div className={classes.divider} />}\n            <ListItem className={classes.listItem}>\n                <Typography className={classes.name} color=\"dark\">\n                    {project?.name}\n                </Typography>\n            </ListItem>\n        </div>\n    );\n});\n\nconst DragHandle = SortableHandle(({ classes }) => (\n    <button className={classes.dragHandleButton} type=\"button\">\n        <MoveIcon className={classes.dragHandle} />\n    </button>\n));\n"]},"metadata":{},"sourceType":"module"}