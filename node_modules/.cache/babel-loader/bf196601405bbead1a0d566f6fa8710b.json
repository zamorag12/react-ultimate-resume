{"ast":null,"code":"\"use strict\";\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n\n  return r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar intl_utils_1 = require(\"@formatjs/intl-utils\");\n\nfunction validateInstance(instance, method) {\n  if (!(instance instanceof PluralRules)) {\n    throw new TypeError(\"Method Intl.PluralRules.prototype.\" + method + \" called on incompatible receiver \" + String(instance));\n  }\n}\n/**\n * https://tc39.es/ecma402/#sec-torawprecision\n * @param x\n * @param minPrecision\n * @param maxPrecision\n */\n\n\nfunction toRawPrecision(x, minPrecision, maxPrecision) {\n  var m = x.toPrecision(maxPrecision);\n\n  if (~m.indexOf('.') && maxPrecision > minPrecision) {\n    var cut = maxPrecision - minPrecision;\n\n    while (cut > 0 && m[m.length - 1] === '0') {\n      m = m.slice(0, m.length - 1);\n      cut--;\n    }\n\n    if (m[m.length - 1] === '.') {\n      return m.slice(0, m.length - 1);\n    }\n  }\n\n  return m;\n}\n/**\n * https://tc39.es/ecma402/#sec-torawfixed\n * @param x\n * @param minInteger\n * @param minFraction\n * @param maxFraction\n */\n\n\nfunction toRawFixed(x, minInteger, minFraction, maxFraction) {\n  var cut = maxFraction - minFraction;\n  var m = x.toFixed(maxFraction);\n\n  while (cut > 0 && m[m.length - 1] === '0') {\n    m = m.slice(0, m.length - 1);\n    cut--;\n  }\n\n  if (m[m.length - 1] === '.') {\n    m = m.slice(0, m.length - 1);\n  }\n\n  var int = m.split('.')[0].length;\n\n  if (int < minInteger) {\n    var z = '';\n\n    for (; z.length < minInteger - int; z += '0') {\n      ;\n    }\n\n    m = z + m;\n  }\n\n  return m;\n}\n\nfunction formatNumericToString(internalSlotMap, pl, x) {\n  var minimumSignificantDigits = intl_utils_1.getInternalSlot(internalSlotMap, pl, 'minimumSignificantDigits');\n  var maximumSignificantDigits = intl_utils_1.getInternalSlot(internalSlotMap, pl, 'maximumSignificantDigits');\n\n  if (minimumSignificantDigits !== undefined && maximumSignificantDigits !== undefined) {\n    return toRawPrecision(x, minimumSignificantDigits, maximumSignificantDigits);\n  }\n\n  return toRawFixed(x, intl_utils_1.getInternalSlot(internalSlotMap, pl, 'minimumIntegerDigits'), intl_utils_1.getInternalSlot(internalSlotMap, pl, 'minimumFractionDigits'), intl_utils_1.getInternalSlot(internalSlotMap, pl, 'maximumFractionDigits'));\n}\n\nvar PluralRules =\n/** @class */\nfunction () {\n  function PluralRules(locales, options) {\n    // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n    // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n    var newTarget = this && this instanceof PluralRules ? this.constructor : void 0;\n\n    if (!newTarget) {\n      throw new TypeError(\"Intl.PluralRules must be called with 'new'\");\n    }\n\n    var requestedLocales = intl_utils_1.getCanonicalLocales(locales);\n    var opt = Object.create(null);\n    var opts = options === undefined ? Object.create(null) : intl_utils_1.toObject(options);\n    intl_utils_1.setInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'initializedPluralRules', true);\n    var matcher = intl_utils_1.getOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n    opt.localeMatcher = matcher;\n    intl_utils_1.setInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'type', intl_utils_1.getOption(opts, 'type', 'string', ['cardinal', 'ordinal'], 'cardinal'));\n    intl_utils_1.setNumberFormatDigitOptions(PluralRules.__INTERNAL_SLOT_MAP__, this, opts, 0, 3);\n    var r = intl_utils_1.createResolveLocale(PluralRules.getDefaultLocale)(PluralRules.availableLocales, requestedLocales, opt, PluralRules.relevantExtensionKeys, PluralRules.localeData);\n    intl_utils_1.setInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'locale', r.locale);\n  }\n\n  PluralRules.prototype.resolvedOptions = function () {\n    var _this = this;\n\n    validateInstance(this, 'resolvedOptions');\n    var opts = Object.create(null);\n    opts.locale = intl_utils_1.getInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'locale');\n    opts.type = intl_utils_1.getInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'type');\n    ['minimumIntegerDigits', 'minimumFractionDigits', 'maximumFractionDigits', 'minimumSignificantDigits', 'maximumSignificantDigits'].forEach(function (field) {\n      var val = intl_utils_1.getInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, _this, field);\n\n      if (val !== undefined) {\n        opts[field] = val;\n      }\n    });\n    opts.pluralCategories = __spreadArrays(PluralRules.localeData[opts.locale].categories[opts.type]);\n    return opts;\n  };\n\n  PluralRules.prototype.select = function (val) {\n    validateInstance(this, 'select');\n    var locale = intl_utils_1.getInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'locale');\n    var type = intl_utils_1.getInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'type');\n    return PluralRules.localeData[locale].fn(formatNumericToString(PluralRules.__INTERNAL_SLOT_MAP__, this, Math.abs(Number(val))), type == 'ordinal');\n  };\n\n  PluralRules.prototype.toString = function () {\n    return '[object Intl.PluralRules]';\n  };\n\n  PluralRules.supportedLocalesOf = function (locales, options) {\n    return intl_utils_1.supportedLocales(PluralRules.availableLocales, intl_utils_1.getCanonicalLocales(locales), options);\n  };\n\n  PluralRules.__addLocaleData = function () {\n    var data = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      data[_i] = arguments[_i];\n    }\n\n    var _loop_1 = function _loop_1(datum) {\n      var availableLocales = Object.keys(__spreadArrays(datum.availableLocales, Object.keys(datum.aliases), Object.keys(datum.parentLocales)).reduce(function (all, k) {\n        all[k] = true;\n        return all;\n      }, {}));\n      availableLocales.forEach(function (locale) {\n        try {\n          PluralRules.localeData[locale] = intl_utils_1.unpackData(locale, datum);\n        } catch (e) {\n          if (intl_utils_1.isMissingLocaleDataError(e)) {\n            // If we just don't have data for certain locale, that's ok\n            return;\n          }\n\n          throw e;\n        }\n      });\n    };\n\n    for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n      var datum = data_1[_a];\n\n      _loop_1(datum);\n    }\n\n    PluralRules.availableLocales = Object.keys(PluralRules.localeData);\n\n    if (!PluralRules.__defaultLocale) {\n      PluralRules.__defaultLocale = PluralRules.availableLocales[0];\n    }\n  };\n\n  PluralRules.getDefaultLocale = function () {\n    return PluralRules.__defaultLocale;\n  };\n\n  PluralRules.localeData = {};\n  PluralRules.availableLocales = [];\n  PluralRules.__defaultLocale = 'en';\n  PluralRules.relevantExtensionKeys = [];\n  PluralRules.polyfilled = true;\n  PluralRules.__INTERNAL_SLOT_MAP__ = new WeakMap();\n  return PluralRules;\n}();\n\nexports.PluralRules = PluralRules;\n\ntry {\n  // https://github.com/tc39/test262/blob/master/test/intl402/PluralRules/length.js\n  Object.defineProperty(PluralRules, 'length', {\n    value: 0,\n    writable: false,\n    enumerable: false,\n    configurable: true\n  }); // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/length.js\n\n  Object.defineProperty(PluralRules.prototype.constructor, 'length', {\n    value: 0,\n    writable: false,\n    enumerable: false,\n    configurable: true\n  }); // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/length.js\n\n  Object.defineProperty(PluralRules.supportedLocalesOf, 'length', {\n    value: 1,\n    writable: false,\n    enumerable: false,\n    configurable: true\n  });\n} catch (ex) {// Meta fixes for test262\n}","map":{"version":3,"sources":["../src/core.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar intl_utils_1 = require(\"@formatjs/intl-utils\");\nfunction validateInstance(instance, method) {\n    if (!(instance instanceof PluralRules)) {\n        throw new TypeError(\"Method Intl.PluralRules.prototype.\" + method + \" called on incompatible receiver \" + String(instance));\n    }\n}\n/**\n * https://tc39.es/ecma402/#sec-torawprecision\n * @param x\n * @param minPrecision\n * @param maxPrecision\n */\nfunction toRawPrecision(x, minPrecision, maxPrecision) {\n    var m = x.toPrecision(maxPrecision);\n    if (~m.indexOf('.') && maxPrecision > minPrecision) {\n        var cut = maxPrecision - minPrecision;\n        while (cut > 0 && m[m.length - 1] === '0') {\n            m = m.slice(0, m.length - 1);\n            cut--;\n        }\n        if (m[m.length - 1] === '.') {\n            return m.slice(0, m.length - 1);\n        }\n    }\n    return m;\n}\n/**\n * https://tc39.es/ecma402/#sec-torawfixed\n * @param x\n * @param minInteger\n * @param minFraction\n * @param maxFraction\n */\nfunction toRawFixed(x, minInteger, minFraction, maxFraction) {\n    var cut = maxFraction - minFraction;\n    var m = x.toFixed(maxFraction);\n    while (cut > 0 && m[m.length - 1] === '0') {\n        m = m.slice(0, m.length - 1);\n        cut--;\n    }\n    if (m[m.length - 1] === '.') {\n        m = m.slice(0, m.length - 1);\n    }\n    var int = m.split('.')[0].length;\n    if (int < minInteger) {\n        var z = '';\n        for (; z.length < minInteger - int; z += '0')\n            ;\n        m = z + m;\n    }\n    return m;\n}\nfunction formatNumericToString(internalSlotMap, pl, x) {\n    var minimumSignificantDigits = intl_utils_1.getInternalSlot(internalSlotMap, pl, 'minimumSignificantDigits');\n    var maximumSignificantDigits = intl_utils_1.getInternalSlot(internalSlotMap, pl, 'maximumSignificantDigits');\n    if (minimumSignificantDigits !== undefined &&\n        maximumSignificantDigits !== undefined) {\n        return toRawPrecision(x, minimumSignificantDigits, maximumSignificantDigits);\n    }\n    return toRawFixed(x, intl_utils_1.getInternalSlot(internalSlotMap, pl, 'minimumIntegerDigits'), intl_utils_1.getInternalSlot(internalSlotMap, pl, 'minimumFractionDigits'), intl_utils_1.getInternalSlot(internalSlotMap, pl, 'maximumFractionDigits'));\n}\nvar PluralRules = /** @class */ (function () {\n    function PluralRules(locales, options) {\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof PluralRules ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.PluralRules must be called with 'new'\");\n        }\n        var requestedLocales = intl_utils_1.getCanonicalLocales(locales);\n        var opt = Object.create(null);\n        var opts = options === undefined ? Object.create(null) : intl_utils_1.toObject(options);\n        intl_utils_1.setInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'initializedPluralRules', true);\n        var matcher = intl_utils_1.getOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n        opt.localeMatcher = matcher;\n        intl_utils_1.setInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'type', intl_utils_1.getOption(opts, 'type', 'string', ['cardinal', 'ordinal'], 'cardinal'));\n        intl_utils_1.setNumberFormatDigitOptions(PluralRules.__INTERNAL_SLOT_MAP__, this, opts, 0, 3);\n        var r = intl_utils_1.createResolveLocale(PluralRules.getDefaultLocale)(PluralRules.availableLocales, requestedLocales, opt, PluralRules.relevantExtensionKeys, PluralRules.localeData);\n        intl_utils_1.setInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'locale', r.locale);\n    }\n    PluralRules.prototype.resolvedOptions = function () {\n        var _this = this;\n        validateInstance(this, 'resolvedOptions');\n        var opts = Object.create(null);\n        opts.locale = intl_utils_1.getInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'locale');\n        opts.type = intl_utils_1.getInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'type');\n        [\n            'minimumIntegerDigits',\n            'minimumFractionDigits',\n            'maximumFractionDigits',\n            'minimumSignificantDigits',\n            'maximumSignificantDigits',\n        ].forEach(function (field) {\n            var val = intl_utils_1.getInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, _this, field);\n            if (val !== undefined) {\n                opts[field] = val;\n            }\n        });\n        opts.pluralCategories = __spreadArrays(PluralRules.localeData[opts.locale].categories[opts.type]);\n        return opts;\n    };\n    PluralRules.prototype.select = function (val) {\n        validateInstance(this, 'select');\n        var locale = intl_utils_1.getInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'locale');\n        var type = intl_utils_1.getInternalSlot(PluralRules.__INTERNAL_SLOT_MAP__, this, 'type');\n        return PluralRules.localeData[locale].fn(formatNumericToString(PluralRules.__INTERNAL_SLOT_MAP__, this, Math.abs(Number(val))), type == 'ordinal');\n    };\n    PluralRules.prototype.toString = function () {\n        return '[object Intl.PluralRules]';\n    };\n    PluralRules.supportedLocalesOf = function (locales, options) {\n        return intl_utils_1.supportedLocales(PluralRules.availableLocales, intl_utils_1.getCanonicalLocales(locales), options);\n    };\n    PluralRules.__addLocaleData = function () {\n        var data = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            data[_i] = arguments[_i];\n        }\n        var _loop_1 = function (datum) {\n            var availableLocales = Object.keys(__spreadArrays(datum.availableLocales, Object.keys(datum.aliases), Object.keys(datum.parentLocales)).reduce(function (all, k) {\n                all[k] = true;\n                return all;\n            }, {}));\n            availableLocales.forEach(function (locale) {\n                try {\n                    PluralRules.localeData[locale] = intl_utils_1.unpackData(locale, datum);\n                }\n                catch (e) {\n                    if (intl_utils_1.isMissingLocaleDataError(e)) {\n                        // If we just don't have data for certain locale, that's ok\n                        return;\n                    }\n                    throw e;\n                }\n            });\n        };\n        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n            var datum = data_1[_a];\n            _loop_1(datum);\n        }\n        PluralRules.availableLocales = Object.keys(PluralRules.localeData);\n        if (!PluralRules.__defaultLocale) {\n            PluralRules.__defaultLocale = PluralRules.availableLocales[0];\n        }\n    };\n    PluralRules.getDefaultLocale = function () {\n        return PluralRules.__defaultLocale;\n    };\n    PluralRules.localeData = {};\n    PluralRules.availableLocales = [];\n    PluralRules.__defaultLocale = 'en';\n    PluralRules.relevantExtensionKeys = [];\n    PluralRules.polyfilled = true;\n    PluralRules.__INTERNAL_SLOT_MAP__ = new WeakMap();\n    return PluralRules;\n}());\nexports.PluralRules = PluralRules;\ntry {\n    // https://github.com/tc39/test262/blob/master/test/intl402/PluralRules/length.js\n    Object.defineProperty(PluralRules, 'length', {\n        value: 0,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/length.js\n    Object.defineProperty(PluralRules.prototype.constructor, 'length', {\n        value: 0,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/length.js\n    Object.defineProperty(PluralRules.supportedLocalesOf, 'length', {\n        value: 1,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n}\ncatch (ex) {\n    // Meta fixes for test262\n}\n//# sourceMappingURL=core.js.map"]},"metadata":{},"sourceType":"script"}