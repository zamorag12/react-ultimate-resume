{"ast":null,"code":"import _objectSpread from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useMemo,useState}from'react';import{useDropzone}from'react-dropzone';import{FormattedMessage}from'react-intl';import{createUseStyles}from'react-jss';import{Typography}from'@welovedevs/ui';import{LoadingSpinner}from'../loading_spinner/loading_spinner';import{ReactComponent as DropFileIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/drop_file.svg\";import{ReactComponent as SuccessIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/success.svg\";import{ReactComponent as RemoveIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/icons/remove_circle.svg\";import{styles}from'./file_drop_zone_styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=createUseStyles(styles);var DEFAULT_ON_DROP=function DEFAULT_ON_DROP(){throw new Error('Did not provide a valid onDrop function.');};var FileDropZoneComponent=function FileDropZoneComponent(_ref){var _ref$disabled=_ref.disabled,disabled=_ref$disabled===void 0?false:_ref$disabled,_ref$onDrop=_ref.onDrop,onDrop=_ref$onDrop===void 0?DEFAULT_ON_DROP:_ref$onDrop;var classes=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),fileUrl=_useState2[0],setFileUrl=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useMemo=useMemo(function(){return{waiting:fileUrl===false,loading:fileUrl===null,success:Boolean(fileUrl)};},[fileUrl]),waiting=_useMemo.waiting,loading=_useMemo.loading,success=_useMemo.success;var handleDrop=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(parameters){var url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(typeof onDrop!=='function')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setFileUrl(null);_context.prev=3;_context.next=6;return onDrop(parameters);case 6:url=_context.sent;setFileUrl(url);_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);console.warn('Failed to drop file',_context.t0);setFileUrl(false);setError(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,10]]);}));return function(_x){return _ref2.apply(this,arguments);};}(),[onDrop]);var _useDropzone=useDropzone({onDrop:handleDrop}),getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps,isDragActive=_useDropzone.isDragActive;if(disabled){return/*#__PURE__*/_jsx(Typography,{children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Dropzone.disabled\",defaultMessage:\"\\u26A0\\uFE0F Dropzone is disabled, no upload callback set. \"})});}return/*#__PURE__*/_jsx(\"button\",_objectSpread(_objectSpread({className:classes.container,type:\"button\"},getRootProps()),{},{children:/*#__PURE__*/_jsx(Content,{waiting:waiting,loading:loading,error:error,success:success,getInputProps:getInputProps,isDragActive:isDragActive,classes:classes})}));};var Content=function Content(_ref3){var waiting=_ref3.waiting,loading=_ref3.loading,error=_ref3.error,success=_ref3.success,getInputProps=_ref3.getInputProps,isDragActive=_ref3.isDragActive,classes=_ref3.classes;if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),/*#__PURE__*/_jsx(Icon,{waiting:waiting,error:error,success:success,classes:classes}),/*#__PURE__*/_jsx(Label,{waiting:waiting,error:error,success:success,isDragActive:isDragActive,classes:classes})]});};var Icon=function Icon(_ref4){var waiting=_ref4.waiting,error=_ref4.error,success=_ref4.success,classes=_ref4.classes;if(error){return/*#__PURE__*/_jsx(RemoveIcon,{className:classes.icon});}if(waiting){return/*#__PURE__*/_jsx(DropFileIcon,{className:classes.icon});}if(success){return/*#__PURE__*/_jsx(SuccessIcon,{className:classes.icon});}return null;};var Label=function Label(_ref5){var waiting=_ref5.waiting,error=_ref5.error,success=_ref5.success,isDragActive=_ref5.isDragActive,classes=_ref5.classes;var text=null;if(isDragActive){text='Release the cracken!';}else if(error){text='An error occurred.';}else if(success){text='File successfully uploaded!';}else if(waiting){text=\"Drag'n drop files or click here.\";}return/*#__PURE__*/_jsx(Typography,{classes:{container:classes.typography},variant:\"h4\",component:\"h4\",children:text});};export var FileDropZone=FileDropZoneComponent;","map":{"version":3,"sources":["/home/gzamora/Documents/test/react-ultimate-resume/src/package/components/commons/file_drop_zone/file_drop_zone.jsx"],"names":["React","useCallback","useMemo","useState","useDropzone","FormattedMessage","createUseStyles","Typography","LoadingSpinner","styles","useStyles","DEFAULT_ON_DROP","Error","FileDropZoneComponent","disabled","onDrop","classes","fileUrl","setFileUrl","error","setError","waiting","loading","success","Boolean","handleDrop","parameters","url","console","warn","getRootProps","getInputProps","isDragActive","container","Content","Icon","icon","Label","text","typography","FileDropZone"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo, useState } from 'react';\n\nimport { useDropzone } from 'react-dropzone';\nimport { FormattedMessage } from 'react-intl';\nimport { createUseStyles } from 'react-jss';\n\nimport { Typography } from '@welovedevs/ui';\n\nimport { LoadingSpinner } from '../loading_spinner/loading_spinner';\n\nimport { ReactComponent as DropFileIcon } from '../../../assets/icons/drop_file.svg';\nimport { ReactComponent as SuccessIcon } from '../../../assets/icons/success.svg';\nimport { ReactComponent as RemoveIcon } from '../../../assets/icons/remove_circle.svg';\n\nimport { styles } from './file_drop_zone_styles';\n\nconst useStyles = createUseStyles(styles);\n\nconst DEFAULT_ON_DROP = () => {\n    throw new Error('Did not provide a valid onDrop function.');\n};\n\nconst FileDropZoneComponent = ({ disabled = false, onDrop = DEFAULT_ON_DROP }) => {\n    const classes = useStyles();\n\n    const [fileUrl, setFileUrl] = useState(false);\n    const [error, setError] = useState(null);\n\n    const { waiting, loading, success } = useMemo(\n        () => ({\n            waiting: fileUrl === false,\n            loading: fileUrl === null,\n            success: Boolean(fileUrl)\n        }),\n        [fileUrl]\n    );\n\n    const handleDrop = useCallback(\n        async (parameters) => {\n            if (typeof onDrop !== 'function') {\n                return;\n            }\n            setFileUrl(null);\n            try {\n                const url = await onDrop(parameters);\n                setFileUrl(url);\n            } catch (e) {\n                console.warn('Failed to drop file', e);\n                setFileUrl(false);\n                setError(e);\n            }\n        },\n        [onDrop]\n    );\n\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop: handleDrop });\n    if (disabled) {\n        return (\n            <Typography>\n                <FormattedMessage\n                    id=\"Dropzone.disabled\"\n                    defaultMessage=\"⚠️ Dropzone is disabled, no upload callback set. \"\n                />\n            </Typography>\n        );\n    }\n    return (\n        <button className={classes.container} type=\"button\" {...getRootProps()}>\n            <Content\n                waiting={waiting}\n                loading={loading}\n                error={error}\n                success={success}\n                getInputProps={getInputProps}\n                isDragActive={isDragActive}\n                classes={classes}\n            />\n        </button>\n    );\n};\n\nconst Content = ({ waiting, loading, error, success, getInputProps, isDragActive, classes }) => {\n    if (loading) {\n        return <LoadingSpinner />;\n    }\n    return (\n        <>\n            <input {...getInputProps()} />\n            <Icon waiting={waiting} error={error} success={success} classes={classes} />\n            <Label waiting={waiting} error={error} success={success} isDragActive={isDragActive} classes={classes} />\n        </>\n    );\n};\n\nconst Icon = ({ waiting, error, success, classes }) => {\n    if (error) {\n        return <RemoveIcon className={classes.icon} />;\n    }\n    if (waiting) {\n        return <DropFileIcon className={classes.icon} />;\n    }\n    if (success) {\n        return <SuccessIcon className={classes.icon} />;\n    }\n    return null;\n};\n\nconst Label = ({ waiting, error, success, isDragActive, classes }) => {\n    let text = null;\n    if (isDragActive) {\n        text = 'Release the cracken!';\n    } else if (error) {\n        text = 'An error occurred.';\n    } else if (success) {\n        text = 'File successfully uploaded!';\n    } else if (waiting) {\n        text = \"Drag'n drop files or click here.\";\n    }\n    return (\n        <Typography classes={{ container: classes.typography }} variant=\"h4\" component=\"h4\">\n            {text}\n        </Typography>\n    );\n};\n\nexport const FileDropZone = FileDropZoneComponent;\n"]},"metadata":{},"sourceType":"module"}