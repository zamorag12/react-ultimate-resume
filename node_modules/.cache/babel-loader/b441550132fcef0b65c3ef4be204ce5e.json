{"ast":null,"code":"import _slicedToArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useContext,useMemo}from'react';import{createUseStyles}from'react-jss';import{FormattedMessage}from'react-intl';import{Button,Typography}from'@welovedevs/ui';import{Dialog,DialogContent,DialogActions}from'@material-ui/core';import{DialogTitle}from'../../commons/dialog/dialog_title/dialog_title';import{DeveloperProfileContext,StaticDataContext}from'../../../utils/context/contexts';import{FileDropZone}from'../../commons/file_drop_zone/file_drop_zone';import{SearchUnsplashDialog}from'../../commons/search_unsplash_dialog/search_unsplash_result';import{useCallbackOpen}from'../../hooks/use_callback_open';import{styles}from'./edit_banner_image_dialog_styles';import{URLFailoverField}from'../../commons/url_failover_field/url_failover_field';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=createUseStyles(styles);var UnsplashButton=function UnsplashButton(_ref){var setSearchUnsplashDialogOpened=_ref.setSearchUnsplashDialogOpened,hasUnsplashEndpoint=_ref.hasUnsplashEndpoint;var classes=useStyles();if(!hasUnsplashEndpoint){return/*#__PURE__*/_jsx(Typography,{className:classes.unsplashStub,component:\"div\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Banner.EditImageDialog.noUnsplashButton\",defaultMessage:\"\\u26A0\\uFE0F No key, unsplash upload is disabled\"})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:classes.buttonContainer,children:/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"outlined\",onClick:setSearchUnsplashDialogOpened,classes:{container:classes.button},children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Banner.EditImageDialog.unsplashButton\",defaultMessage:\"Search on unsplash\"})})}),/*#__PURE__*/_jsx(\"div\",{className:classes.divider,children:/*#__PURE__*/_jsx(Typography,{className:classes.dividerOr,variant:\"h4\",component:\"h4\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Main.Lang.Or\",defaultMessage:\"or\"})})})]});};var EditBannerImageDialogComponent=function EditBannerImageDialogComponent(_ref2){var open=_ref2.open,onClose=_ref2.onClose,onChange=_ref2.onChange;var _useCallbackOpen=useCallbackOpen(),_useCallbackOpen2=_slicedToArray(_useCallbackOpen,3),openSearchUnsplashDialog=_useCallbackOpen2[0],setSearchUnsplashDialogOpened=_useCallbackOpen2[1],setSearchUnsplashDialogClosed=_useCallbackOpen2[2];var _useContext=useContext(StaticDataContext),endpoints=_useContext.endpoints;var _useContext2=useContext(DeveloperProfileContext),onFilesUpload=_useContext2.onFilesUpload;var hasUnsplashEndpoint=useMemo(function(){return!!endpoints.unsplashProxy;},[endpoints.unsplashProxy]);var needsFailoverField=useMemo(function(){return!hasUnsplashEndpoint&&!onFilesUpload;},[hasUnsplashEndpoint,onFilesUpload]);var onImageSelected=useCallback(function(payload){onChange(payload);onClose();setSearchUnsplashDialogClosed();},[onChange,onClose]);var onImageChanged=useCallback(function(payload){onChange(payload);},[onChange,onClose]);var onDrop=useCallback(function(files){return onFilesUpload(files).then(function(url){onImageSelected({url:url});return url;});},[onImageSelected]);var onClear=useCallback(function(){return onImageSelected(null);},[onImageSelected]);return/*#__PURE__*/_jsxs(_Fragment,{children:[hasUnsplashEndpoint&&/*#__PURE__*/_jsx(SearchUnsplashDialog,{open:openSearchUnsplashDialog,onClose:setSearchUnsplashDialogClosed,onSelect:onImageSelected}),/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:onClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Banner.EditImageDialog.Title\",defaultMessage:\"Pick an image\"})}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(UnsplashButton,{setSearchUnsplashDialogOpened:setSearchUnsplashDialogOpened,hasUnsplashEndpoint:hasUnsplashEndpoint}),/*#__PURE__*/_jsx(FileDropZone,{disabled:!onFilesUpload,onDrop:onDrop}),needsFailoverField&&/*#__PURE__*/_jsx(URLFailoverField,{onChange:onImageChanged})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{size:\"small\",color:\"danger\",onClick:onClear,children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Main.lang.clear\",defaultMessage:\"Clear\"})}),/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:onClose,children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Main.lang.close\",defaultMessage:\"Close\"})})]})]})]});};export var EditBannerImageDialog=EditBannerImageDialogComponent;","map":{"version":3,"sources":["/home/gzamora/Documents/test/react-ultimate-resume/src/package/components/banner/edit_banner_image_dialog/edit_banner_image_dialog.jsx"],"names":["React","useCallback","useContext","useMemo","createUseStyles","FormattedMessage","Button","Typography","Dialog","DialogContent","DialogActions","DialogTitle","DeveloperProfileContext","StaticDataContext","FileDropZone","SearchUnsplashDialog","useCallbackOpen","styles","URLFailoverField","useStyles","UnsplashButton","setSearchUnsplashDialogOpened","hasUnsplashEndpoint","classes","unsplashStub","buttonContainer","container","button","divider","dividerOr","EditBannerImageDialogComponent","open","onClose","onChange","openSearchUnsplashDialog","setSearchUnsplashDialogClosed","endpoints","onFilesUpload","unsplashProxy","needsFailoverField","onImageSelected","payload","onImageChanged","onDrop","files","then","url","onClear","EditBannerImageDialog"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,UAA7B,CAAyCC,OAAzC,KAAwD,OAAxD,CAEA,OAASC,eAAT,KAAgC,WAAhC,CACA,OAASC,gBAAT,KAAiC,YAAjC,CAEA,OAASC,MAAT,CAAiBC,UAAjB,KAAmC,gBAAnC,CAEA,OAASC,MAAT,CAAiBC,aAAjB,CAAgCC,aAAhC,KAAqD,mBAArD,CAEA,OAASC,WAAT,KAA4B,gDAA5B,CACA,OAASC,uBAAT,CAAkCC,iBAAlC,KAA2D,iCAA3D,CAEA,OAASC,YAAT,KAA6B,6CAA7B,CACA,OAASC,oBAAT,KAAqC,6DAArC,CAEA,OAASC,eAAT,KAAgC,+BAAhC,CAEA,OAASC,MAAT,KAAuB,mCAAvB,CACA,OAASC,gBAAT,KAAiC,qDAAjC,C,6IAEA,GAAMC,CAAAA,SAAS,CAAGf,eAAe,CAACa,MAAD,CAAjC,CAEA,GAAMG,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAA4D,IAAzDC,CAAAA,6BAAyD,MAAzDA,6BAAyD,CAA1BC,mBAA0B,MAA1BA,mBAA0B,CAC/E,GAAMC,CAAAA,OAAO,CAAGJ,SAAS,EAAzB,CACA,GAAI,CAACG,mBAAL,CAA0B,CACtB,mBACI,KAAC,UAAD,EAAY,SAAS,CAAEC,OAAO,CAACC,YAA/B,CAA6C,SAAS,CAAC,KAAvD,uBACI,KAAC,gBAAD,EACI,EAAE,CAAC,yCADP,CAEI,cAAc,CAAC,kDAFnB,EADJ,EADJ,CAQH,CACD,mBACI,wCACI,YAAK,SAAS,CAAED,OAAO,CAACE,eAAxB,uBACI,KAAC,MAAD,EACI,KAAK,CAAC,SADV,CAEI,OAAO,CAAC,UAFZ,CAGI,OAAO,CAAEJ,6BAHb,CAII,OAAO,CAAE,CACLK,SAAS,CAAEH,OAAO,CAACI,MADd,CAJb,uBAQI,KAAC,gBAAD,EAAkB,EAAE,CAAC,uCAArB,CAA6D,cAAc,CAAC,oBAA5E,EARJ,EADJ,EADJ,cAaI,YAAK,SAAS,CAAEJ,OAAO,CAACK,OAAxB,uBACI,KAAC,UAAD,EAAY,SAAS,CAAEL,OAAO,CAACM,SAA/B,CAA0C,OAAO,CAAC,IAAlD,CAAuD,SAAS,CAAC,IAAjE,uBACI,KAAC,gBAAD,EAAkB,EAAE,CAAC,cAArB,CAAoC,cAAc,CAAC,IAAnD,EADJ,EADJ,EAbJ,GADJ,CAqBH,CAjCD,CAmCA,GAAMC,CAAAA,8BAA8B,CAAG,QAAjCA,CAAAA,8BAAiC,OAAiC,IAA9BC,CAAAA,IAA8B,OAA9BA,IAA8B,CAAxBC,OAAwB,OAAxBA,OAAwB,CAAfC,QAAe,OAAfA,QAAe,sBAC6BjB,eAAe,EAD5C,sDAC7DkB,wBAD6D,sBACnCb,6BADmC,sBACJc,6BADI,sCAE9CjC,UAAU,CAACW,iBAAD,CAFoC,CAE5DuB,SAF4D,aAE5DA,SAF4D,kBAI1ClC,UAAU,CAACU,uBAAD,CAJgC,CAI5DyB,aAJ4D,cAI5DA,aAJ4D,CAKpE,GAAMf,CAAAA,mBAAmB,CAAGnB,OAAO,CAAC,iBAAM,CAAC,CAACiC,SAAS,CAACE,aAAlB,EAAD,CAAkC,CAACF,SAAS,CAACE,aAAX,CAAlC,CAAnC,CACA,GAAMC,CAAAA,kBAAkB,CAAGpC,OAAO,CAAC,iBAAM,CAACmB,mBAAD,EAAwB,CAACe,aAA/B,EAAD,CAA+C,CAC7Ef,mBAD6E,CAE7Ee,aAF6E,CAA/C,CAAlC,CAKA,GAAMG,CAAAA,eAAe,CAAGvC,WAAW,CAC/B,SAACwC,OAAD,CAAa,CACTR,QAAQ,CAACQ,OAAD,CAAR,CACAT,OAAO,GACPG,6BAA6B,GAChC,CAL8B,CAM/B,CAACF,QAAD,CAAWD,OAAX,CAN+B,CAAnC,CASA,GAAMU,CAAAA,cAAc,CAAGzC,WAAW,CAC9B,SAACwC,OAAD,CAAa,CACTR,QAAQ,CAACQ,OAAD,CAAR,CACH,CAH6B,CAI9B,CAACR,QAAD,CAAWD,OAAX,CAJ8B,CAAlC,CAOA,GAAMW,CAAAA,MAAM,CAAG1C,WAAW,CACtB,SAAC2C,KAAD,QACIP,CAAAA,aAAa,CAACO,KAAD,CAAb,CAAqBC,IAArB,CAA0B,SAACC,GAAD,CAAS,CAC/BN,eAAe,CAAC,CAAEM,GAAG,CAAHA,GAAF,CAAD,CAAf,CACA,MAAOA,CAAAA,GAAP,CACH,CAHD,CADJ,EADsB,CAMtB,CAACN,eAAD,CANsB,CAA1B,CAQA,GAAMO,CAAAA,OAAO,CAAG9C,WAAW,CAAC,iBAAMuC,CAAAA,eAAe,CAAC,IAAD,CAArB,EAAD,CAA8B,CAACA,eAAD,CAA9B,CAA3B,CAEA,mBACI,2BACKlB,mBAAmB,eAChB,KAAC,oBAAD,EACI,IAAI,CAAEY,wBADV,CAEI,OAAO,CAAEC,6BAFb,CAGI,QAAQ,CAAEK,eAHd,EAFR,cAQI,MAAC,MAAD,EAAQ,IAAI,CAAET,IAAd,CAAoB,OAAO,CAAEC,OAA7B,wBACI,KAAC,WAAD,wBACI,KAAC,gBAAD,EAAkB,EAAE,CAAC,8BAArB,CAAoD,cAAc,CAAC,eAAnE,EADJ,EADJ,cAII,MAAC,aAAD,yBACI,KAAC,cAAD,EACI,6BAA6B,CAAEX,6BADnC,CAEI,mBAAmB,CAAEC,mBAFzB,EADJ,cAKI,KAAC,YAAD,EAAc,QAAQ,CAAE,CAACe,aAAzB,CAAwC,MAAM,CAAEM,MAAhD,EALJ,CAMKJ,kBAAkB,eAAI,KAAC,gBAAD,EAAkB,QAAQ,CAAEG,cAA5B,EAN3B,GAJJ,cAYI,MAAC,aAAD,yBACI,KAAC,MAAD,EAAQ,IAAI,CAAC,OAAb,CAAqB,KAAK,CAAC,QAA3B,CAAoC,OAAO,CAAEK,OAA7C,uBACI,KAAC,gBAAD,EAAkB,EAAE,CAAC,iBAArB,CAAuC,cAAc,CAAC,OAAtD,EADJ,EADJ,cAII,KAAC,MAAD,EAAQ,IAAI,CAAC,OAAb,CAAqB,OAAO,CAAEf,OAA9B,uBACI,KAAC,gBAAD,EAAkB,EAAE,CAAC,iBAArB,CAAuC,cAAc,CAAC,OAAtD,EADJ,EAJJ,GAZJ,GARJ,GADJ,CAgCH,CArED,CAuEA,MAAO,IAAMgB,CAAAA,qBAAqB,CAAGlB,8BAA9B","sourcesContent":["import React, { useCallback, useContext, useMemo } from 'react';\n\nimport { createUseStyles } from 'react-jss';\nimport { FormattedMessage } from 'react-intl';\n\nimport { Button, Typography } from '@welovedevs/ui';\n\nimport { Dialog, DialogContent, DialogActions } from '@material-ui/core';\n\nimport { DialogTitle } from '../../commons/dialog/dialog_title/dialog_title';\nimport { DeveloperProfileContext, StaticDataContext } from '../../../utils/context/contexts';\n\nimport { FileDropZone } from '../../commons/file_drop_zone/file_drop_zone';\nimport { SearchUnsplashDialog } from '../../commons/search_unsplash_dialog/search_unsplash_result';\n\nimport { useCallbackOpen } from '../../hooks/use_callback_open';\n\nimport { styles } from './edit_banner_image_dialog_styles';\nimport { URLFailoverField } from '../../commons/url_failover_field/url_failover_field';\n\nconst useStyles = createUseStyles(styles);\n\nconst UnsplashButton = ({ setSearchUnsplashDialogOpened, hasUnsplashEndpoint }) => {\n    const classes = useStyles();\n    if (!hasUnsplashEndpoint) {\n        return (\n            <Typography className={classes.unsplashStub} component=\"div\">\n                <FormattedMessage\n                    id=\"Banner.EditImageDialog.noUnsplashButton\"\n                    defaultMessage=\"⚠️ No key, unsplash upload is disabled\"\n                />\n            </Typography>\n        );\n    }\n    return (\n        <>\n            <div className={classes.buttonContainer}>\n                <Button\n                    color=\"primary\"\n                    variant=\"outlined\"\n                    onClick={setSearchUnsplashDialogOpened}\n                    classes={{\n                        container: classes.button\n                    }}\n                >\n                    <FormattedMessage id=\"Banner.EditImageDialog.unsplashButton\" defaultMessage=\"Search on unsplash\" />\n                </Button>\n            </div>\n            <div className={classes.divider}>\n                <Typography className={classes.dividerOr} variant=\"h4\" component=\"h4\">\n                    <FormattedMessage id=\"Main.Lang.Or\" defaultMessage=\"or\" />\n                </Typography>\n            </div>\n        </>\n    );\n};\n\nconst EditBannerImageDialogComponent = ({ open, onClose, onChange }) => {\n    const [openSearchUnsplashDialog, setSearchUnsplashDialogOpened, setSearchUnsplashDialogClosed] = useCallbackOpen();\n    const { endpoints } = useContext(StaticDataContext);\n\n    const { onFilesUpload } = useContext(DeveloperProfileContext);\n    const hasUnsplashEndpoint = useMemo(() => !!endpoints.unsplashProxy, [endpoints.unsplashProxy]);\n    const needsFailoverField = useMemo(() => !hasUnsplashEndpoint && !onFilesUpload, [\n        hasUnsplashEndpoint,\n        onFilesUpload\n    ]);\n\n    const onImageSelected = useCallback(\n        (payload) => {\n            onChange(payload);\n            onClose();\n            setSearchUnsplashDialogClosed();\n        },\n        [onChange, onClose]\n    );\n\n    const onImageChanged = useCallback(\n        (payload) => {\n            onChange(payload);\n        },\n        [onChange, onClose]\n    );\n\n    const onDrop = useCallback(\n        (files) =>\n            onFilesUpload(files).then((url) => {\n                onImageSelected({ url });\n                return url;\n            }),\n        [onImageSelected]\n    );\n    const onClear = useCallback(() => onImageSelected(null), [onImageSelected]);\n\n    return (\n        <>\n            {hasUnsplashEndpoint && (\n                <SearchUnsplashDialog\n                    open={openSearchUnsplashDialog}\n                    onClose={setSearchUnsplashDialogClosed}\n                    onSelect={onImageSelected}\n                />\n            )}\n            <Dialog open={open} onClose={onClose}>\n                <DialogTitle>\n                    <FormattedMessage id=\"Banner.EditImageDialog.Title\" defaultMessage=\"Pick an image\" />\n                </DialogTitle>\n                <DialogContent>\n                    <UnsplashButton\n                        setSearchUnsplashDialogOpened={setSearchUnsplashDialogOpened}\n                        hasUnsplashEndpoint={hasUnsplashEndpoint}\n                    />\n                    <FileDropZone disabled={!onFilesUpload} onDrop={onDrop} />\n                    {needsFailoverField && <URLFailoverField onChange={onImageChanged} />}\n                </DialogContent>\n                <DialogActions>\n                    <Button size=\"small\" color=\"danger\" onClick={onClear}>\n                        <FormattedMessage id=\"Main.lang.clear\" defaultMessage=\"Clear\" />\n                    </Button>\n                    <Button size=\"small\" onClick={onClose}>\n                        <FormattedMessage id=\"Main.lang.close\" defaultMessage=\"Close\" />\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n};\n\nexport const EditBannerImageDialog = EditBannerImageDialogComponent;\n"]},"metadata":{},"sourceType":"module"}