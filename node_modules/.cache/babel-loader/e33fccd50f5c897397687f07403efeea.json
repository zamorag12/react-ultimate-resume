{"ast":null,"code":"import _objectSpread from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{memo,useCallback,useMemo,useState}from'react';import cn from'classnames';import{createUseStyles,useTheme}from'react-jss';import{FormattedMessage,useIntl}from'react-intl';import{Twemoji}from'react-emoji-render';import{arrayMove,SortableContainer,SortableElement,SortableHandle}from'react-sortable-hoc';import{useFormikContext}from'formik';import keyBy from'lodash/keyBy';import range from'lodash/range';import moment from'moment';import uuid from'uuid/v4';import{List,ListItem,TextField,Tooltip,Typography}from'@welovedevs/ui';import{MenuItem,useMediaQuery}from'@material-ui/core';import{EditDialog}from'../../../../commons/edit_dialog/edit_dialog';import{Select}from'../../../../commons/select/select';import{ReactComponent as MoveIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../../../assets/icons/move_list.svg\";import{ReactComponent as DeleteIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../../../assets/icons/trash.svg\";import{ReactComponent as ArrowIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../../../assets/icons/keyboard_arrow_down.svg\";import{AddButton}from'../../../../commons/add_button/add_button';import{translations}from'./studies_translations';import{styles}from'./studies_styles';import{STUDIES_CONTENT_TRANSITION_PROPS}from'./studies_edit_dialog_props';import{AnimatePresence,motion}from'framer-motion';import{DEFAULT_SPRING_TYPE as spring}from'../../../../../utils/framer_motion/common_types/spring_type';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DragHandle=SortableHandle(function(_ref){var classes=_ref.classes;return/*#__PURE__*/_jsx(\"button\",{className:classes.dragHandleButton,type:\"button\",children:/*#__PURE__*/_jsx(MoveIcon,{className:classes.dragHandle})});});var useStyles=createUseStyles(styles);var StudiesCardEditDialogComponent=function StudiesCardEditDialogComponent(_ref2){var open=_ref2.open,onClose=_ref2.onClose,data=_ref2.data,onEdit=_ref2.onEdit,validationSchema=_ref2.validationSchema,isEditing=_ref2.isEditing;var classes=useStyles();var _useIntl=useIntl(),formatMessage=_useIntl.formatMessage;var validationSchemaToPass=useMemo(function(){return validationSchema(formatMessage);},[validationSchema]);return/*#__PURE__*/_jsx(EditDialog,{classes:{paper:classes.paper},open:open,onClose:onClose,data:data,isEditing:isEditing,onEdit:onEdit,validationSchema:validationSchemaToPass,title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Studies.editDialog.title\",defaultMessage:\"Your studies\"}),children:function children(helpers){return/*#__PURE__*/_jsx(FormationsEditFormWrapper,{helpers:helpers});}});};var FormationsEditFormWrapper=function FormationsEditFormWrapper(_ref3){var handleValueChange=_ref3.helpers.handleValueChange;var _useFormikContext=useFormikContext(),education=_useFormikContext.values.education,validationErrors=_useFormikContext.errors;var errors=validationErrors===null||validationErrors===void 0?void 0:validationErrors.education;var formationChanged=useCallback(function(educationsIndex,field,value){handleValueChange(\"education[\".concat(educationsIndex,\"].\").concat(field))(value);},[]);var formationDeleted=useCallback(function(deletedId){return function(){handleValueChange('education')(education.filter(function(_ref4){var id=_ref4.id;return deletedId!==id;}));};},[JSON.stringify(education)]);var formationAdded=useCallback(function(){var id=uuid();return handleValueChange('education')([].concat(_toConsumableArray(education),[{position:education.length,id:id}]));},[JSON.stringify(education)]);var move=useCallback(function(_ref5){var oldIndex=_ref5.oldIndex,newIndex=_ref5.newIndex;handleValueChange('education')(arrayMove(education,oldIndex,newIndex));},[JSON.stringify(education)]);return/*#__PURE__*/_jsx(FormationsEditForm,{data:education,onMove:move,onAdd:formationAdded,onFieldChange:formationChanged,onDelete:formationDeleted,errors:errors});};var SelectComponent=/*#__PURE__*/memo(function(_ref6){var value=_ref6.value,onChange=_ref6.onChange,classes=_ref6.classes,id=_ref6.id;var selectYearItems=useMemo(function(){return range(1980,moment().year()+8).sort(function(a,b){return b-a;}).map(function(year){return/*#__PURE__*/_jsx(MenuItem,{value:year,children:year},\"formation_year_\".concat(id,\"_\").concat(year));});},[]);return/*#__PURE__*/_jsx(Select,{textFieldProps:{fullWidth:true,variant:'flat'},value:moment.isMoment(value)?value.year():null,onChange:onChange,textFieldIconProps:{className:classes.selectIcon},children:selectYearItems});});var FormationItem=SortableElement(function(_ref7){var id=_ref7.id,formation=_ref7.formation,onChange=_ref7.onChange,onRemove=_ref7.onRemove,fieldErrors=_ref7.error,folded=_ref7.folded,toggleFold=_ref7.toggleFold,classes=_ref7.classes,index=_ref7.formationIndex;var theme=useTheme();var isMobile=useMediaQuery(\"(max-width: \".concat(theme.screenSizes.small,\"px)\"));var _useIntl2=useIntl(),formatMessage=_useIntl2.formatMessage;var handleInstitutionChange=useCallback(function(event){return onChange(index,'institution',event.target.value);},[index]);var handleStudyType=useCallback(function(event){return onChange(index,'studyType',event.target.value);},[index]);var handleAreaChange=useCallback(function(event){return onChange(index,'area',event.target.value);},[index]);var handleEndDate=useCallback(function(value){return onChange(index,'endDate',moment({year:value}));},[index]);var hasError=Boolean(fieldErrors);return/*#__PURE__*/_jsx(\"div\",{className:classes.study,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.itemContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.header,children:[/*#__PURE__*/_jsx(DragHandle,{classes:classes}),/*#__PURE__*/_jsx(\"div\",{className:classes.divider}),/*#__PURE__*/_jsx(Tooltip,{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Main.lang.delete\",defaultMessage:\"Delete\"}),children:/*#__PURE__*/_jsx(\"button\",{className:classes.removeButton,type:\"button\",onClick:onRemove(id),children:/*#__PURE__*/_jsx(DeleteIcon,{className:classes.removeIcon})})}),!isMobile&&/*#__PURE__*/_jsx(\"div\",{className:classes.divider}),/*#__PURE__*/_jsxs(ListItem,{button:true,className:cn(classes.listItem,hasError&&classes.listItemError),onClick:function onClick(){return toggleFold(!folded);},children:[/*#__PURE__*/_jsx(motion.div,{className:classes.arrowContainer,animate:{transform:\"rotate(\".concat(folded?-90:0,\"deg)\")},children:/*#__PURE__*/_jsx(ArrowIcon,{className:cn('refinement-arrow')})}),hasError&&/*#__PURE__*/_jsx(Twemoji,{className:classes.warningIcon,svg:true,text:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(Typography,{className:classes.smallTitle,color:\"dark\",children:formation.institution})]})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:!folded&&/*#__PURE__*/_jsxs(motion.div,{variants:STUDIES_CONTENT_TRANSITION_PROPS,initial:\"initial\",animate:\"animate\",exit:\"exit\",transition:spring,className:cn(classes.listItem,fieldErrors&&classes.listItemError),children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.fieldGroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.field,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"flat\",value:formation.institution,onChange:handleInstitutionChange,id:\"formation_institution_\".concat(id),placeholder:formatMessage(translations.schoolNamePlaceholder)}),fieldErrors&&fieldErrors.institution&&/*#__PURE__*/_jsx(Typography,{color:\"danger\",variant:\"helper\",component:\"p\",children:fieldErrors.institution})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.field,children:[/*#__PURE__*/_jsx(SelectComponent,{onChange:handleEndDate,id:formation.id,value:formation.endDate,classes:classes}),fieldErrors&&fieldErrors.endDate&&/*#__PURE__*/_jsx(Typography,{color:\"danger\",variant:\"helper\",component:\"p\",children:fieldErrors.endDate})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.fieldGroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.field,children:[/*#__PURE__*/_jsx(TextField,{id:\"formation_diploma_\".concat(id),fullWidth:true,variant:\"flat\",label:formatMessage(translations.diplomaTitle),placeholder:formatMessage(translations.diplomaPlaceholder),value:formation.studyType,onChange:handleStudyType,margin:\"normal\",error:fieldErrors&&fieldErrors.studyType}),fieldErrors&&fieldErrors.studyType&&/*#__PURE__*/_jsx(Typography,{color:\"danger\",variant:\"helper\",component:\"p\",children:fieldErrors.studyType})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.field,children:[/*#__PURE__*/_jsx(TextField,{id:\"formation_area_\".concat(id),fullWidth:true,variant:\"flat\",label:formatMessage(translations.mainCourse),placeholder:formatMessage(translations.mainCoursePlaceholder),value:formation.area,onChange:handleAreaChange,margin:\"normal\",error:fieldErrors&&fieldErrors.area}),fieldErrors&&fieldErrors.area&&/*#__PURE__*/_jsx(Typography,{color:\"danger\",variant:\"helper\",component:\"p\",children:fieldErrors.area})]})]})]})})]})});});var SortableFormationsItems=SortableContainer(function(_ref8){var items=_ref8.items,formationChanged=_ref8.formationChanged,formationDeleted=_ref8.formationDeleted,errors=_ref8.errors,name=_ref8.name,schools=_ref8.schools,classes=_ref8.classes;var keyedValues=useMemo(function(){return keyBy(items,function(_ref9){var id=_ref9.id;return id;});},[items]);var _useState=useState(Object.keys(keyedValues||{}).reduce(function(state,id){// eslint-disable-next-line no-param-reassign\nstate[id]=true;return state;},{})),_useState2=_slicedToArray(_useState,2),foldedState=_useState2[0],setFoldState=_useState2[1];var toggleFold=useCallback(function(id){return function(value){var newFoldState=_objectSpread({},foldedState);newFoldState[id]=value;setFoldState(newFoldState);};},[foldedState]);return/*#__PURE__*/_jsx(List,{children:items.map(function(formation,index){return/*#__PURE__*/_jsx(FormationItem,{onChange:formationChanged,onRemove:formationDeleted,id:formation.id,formationIndex:index,error:errors&&errors[index],toggleFold:toggleFold(formation.id),folded:foldedState[formation.id],index:index,formation:formation,schools:schools,classes:classes},\"\".concat(name,\"_\").concat(formation.id,\"_\").concat(index));})});});export var FormationsEditForm=function FormationsEditForm(_ref10){var data=_ref10.data,onMove=_ref10.onMove,onAdd=_ref10.onAdd,onFieldChange=_ref10.onFieldChange,onDelete=_ref10.onDelete,errors=_ref10.errors;var classes=useStyles();var globalError=typeof errors==='string'&&errors;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SortableFormationsItems,{lockToContainerEdges:true,helperClass:classes.sortableHelper,items:data,onSortEnd:onMove,distance:20,useDragHandle:true,lockAxis:\"y\",name:\"education\",formationChanged:onFieldChange,formationDeleted:onDelete,errors:errors,classes:classes}),/*#__PURE__*/_jsx(AddButton,{onClick:onAdd}),globalError&&/*#__PURE__*/_jsx(Typography,{color:\"danger\",component:\"p\",children:errors})]});};export var StudiesCardEditDialog=StudiesCardEditDialogComponent;","map":{"version":3,"sources":["/home/gzamora/Documents/test/react-ultimate-resume/src/package/components/cards/cards_types/studies/edit_dialog/studies_card_edit_dialog.jsx"],"names":["React","memo","useCallback","useMemo","useState","cn","createUseStyles","useTheme","FormattedMessage","useIntl","Twemoji","arrayMove","SortableContainer","SortableElement","SortableHandle","useFormikContext","keyBy","range","moment","uuid","List","ListItem","TextField","Tooltip","Typography","MenuItem","useMediaQuery","EditDialog","Select","AddButton","translations","styles","STUDIES_CONTENT_TRANSITION_PROPS","AnimatePresence","motion","DEFAULT_SPRING_TYPE","spring","DragHandle","classes","dragHandleButton","dragHandle","useStyles","StudiesCardEditDialogComponent","open","onClose","data","onEdit","validationSchema","isEditing","formatMessage","validationSchemaToPass","paper","helpers","FormationsEditFormWrapper","handleValueChange","education","values","validationErrors","errors","formationChanged","educationsIndex","field","value","formationDeleted","deletedId","filter","id","JSON","stringify","formationAdded","position","length","move","oldIndex","newIndex","SelectComponent","onChange","selectYearItems","year","sort","a","b","map","fullWidth","variant","isMoment","className","selectIcon","FormationItem","formation","onRemove","fieldErrors","error","folded","toggleFold","index","formationIndex","theme","isMobile","screenSizes","small","handleInstitutionChange","event","target","handleStudyType","handleAreaChange","handleEndDate","hasError","Boolean","study","itemContainer","header","divider","removeButton","removeIcon","listItem","listItemError","arrowContainer","transform","warningIcon","smallTitle","institution","fieldGroup","schoolNamePlaceholder","endDate","diplomaTitle","diplomaPlaceholder","studyType","mainCourse","mainCoursePlaceholder","area","SortableFormationsItems","items","name","schools","keyedValues","Object","keys","reduce","state","foldedState","setFoldState","newFoldState","FormationsEditForm","onMove","onAdd","onFieldChange","onDelete","globalError","sortableHelper","StudiesCardEditDialog"],"mappings":"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","sourcesContent":["import React, { memo, useCallback, useMemo, useState } from 'react';\n\nimport cn from 'classnames';\nimport { createUseStyles, useTheme } from 'react-jss';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\nimport { Twemoji } from 'react-emoji-render';\nimport { arrayMove, SortableContainer, SortableElement, SortableHandle } from 'react-sortable-hoc';\nimport { useFormikContext } from 'formik';\nimport keyBy from 'lodash/keyBy';\nimport range from 'lodash/range';\nimport moment from 'moment';\nimport uuid from 'uuid/v4';\n\nimport { List, ListItem, TextField, Tooltip, Typography } from '@welovedevs/ui';\n\nimport { MenuItem, useMediaQuery } from '@material-ui/core';\n\nimport { EditDialog } from '../../../../commons/edit_dialog/edit_dialog';\n\nimport { Select } from '../../../../commons/select/select';\n\nimport { ReactComponent as MoveIcon } from '../../../../../assets/icons/move_list.svg';\nimport { ReactComponent as DeleteIcon } from '../../../../../assets/icons/trash.svg';\nimport { ReactComponent as ArrowIcon } from '../../../../../assets/icons/keyboard_arrow_down.svg';\n\nimport { AddButton } from '../../../../commons/add_button/add_button';\n\nimport { translations } from './studies_translations';\nimport { styles } from './studies_styles';\nimport { STUDIES_CONTENT_TRANSITION_PROPS } from './studies_edit_dialog_props';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { DEFAULT_SPRING_TYPE as spring } from '../../../../../utils/framer_motion/common_types/spring_type';\n\nconst DragHandle = SortableHandle(({ classes }) => (\n    <button className={classes.dragHandleButton} type=\"button\">\n        <MoveIcon className={classes.dragHandle} />\n    </button>\n));\nconst useStyles = createUseStyles(styles);\n\nconst StudiesCardEditDialogComponent = ({ open, onClose, data, onEdit, validationSchema, isEditing }) => {\n    const classes = useStyles();\n    const { formatMessage } = useIntl();\n    const validationSchemaToPass = useMemo(() => validationSchema(formatMessage), [validationSchema]);\n\n    return (\n        <EditDialog\n            classes={{\n                paper: classes.paper\n            }}\n            open={open}\n            onClose={onClose}\n            data={data}\n            isEditing={isEditing}\n            onEdit={onEdit}\n            validationSchema={validationSchemaToPass}\n            title={<FormattedMessage id=\"Studies.editDialog.title\" defaultMessage=\"Your studies\" />}\n        >\n            {(helpers) => <FormationsEditFormWrapper helpers={helpers} />}\n        </EditDialog>\n    );\n};\n\nconst FormationsEditFormWrapper = ({ helpers: { handleValueChange } }) => {\n    const {\n        values: { education },\n        errors: validationErrors\n    } = useFormikContext();\n\n    const errors = validationErrors?.education;\n\n    const formationChanged = useCallback((educationsIndex, field, value) => {\n        handleValueChange(`education[${educationsIndex}].${field}`)(value);\n    }, []);\n    const formationDeleted = useCallback(\n        (deletedId) => () => {\n            handleValueChange('education')(education.filter(({ id }) => deletedId !== id));\n        },\n        [JSON.stringify(education)]\n    );\n\n    const formationAdded = useCallback(() => {\n        const id = uuid();\n        return handleValueChange('education')([\n            ...education,\n            {\n                position: education.length,\n                id\n            }\n        ]);\n    }, [JSON.stringify(education)]);\n    const move = useCallback(\n        ({ oldIndex, newIndex }) => {\n            handleValueChange('education')(arrayMove(education, oldIndex, newIndex));\n        },\n        [JSON.stringify(education)]\n    );\n\n    return (\n        <FormationsEditForm\n            data={education}\n            onMove={move}\n            onAdd={formationAdded}\n            onFieldChange={formationChanged}\n            onDelete={formationDeleted}\n            errors={errors}\n        />\n    );\n};\n\nconst SelectComponent = memo(({ value, onChange, classes, id }) => {\n    const selectYearItems = useMemo(\n        () =>\n            range(1980, moment().year() + 8)\n                .sort((a, b) => b - a)\n                .map((year) => (\n                    <MenuItem key={`formation_year_${id}_${year}`} value={year}>\n                        {year}\n                    </MenuItem>\n                )),\n        []\n    );\n\n    return (\n        <Select\n            textFieldProps={{\n                fullWidth: true,\n                variant: 'flat'\n            }}\n            value={moment.isMoment(value) ? value.year() : null}\n            onChange={onChange}\n            textFieldIconProps={{ className: classes.selectIcon }}\n        >\n            {selectYearItems}\n        </Select>\n    );\n});\n\nconst FormationItem = SortableElement(\n    ({ id, formation, onChange, onRemove, error: fieldErrors, folded, toggleFold, classes, formationIndex: index }) => {\n        const theme = useTheme();\n        const isMobile = useMediaQuery(`(max-width: ${theme.screenSizes.small}px)`);\n\n        const { formatMessage } = useIntl();\n\n        const handleInstitutionChange = useCallback((event) => onChange(index, 'institution', event.target.value), [\n            index\n        ]);\n        const handleStudyType = useCallback((event) => onChange(index, 'studyType', event.target.value), [index]);\n        const handleAreaChange = useCallback((event) => onChange(index, 'area', event.target.value), [index]);\n        const handleEndDate = useCallback((value) => onChange(index, 'endDate', moment({ year: value })), [index]);\n\n        const hasError = Boolean(fieldErrors);\n\n        return (\n            <div className={classes.study}>\n                <div className={classes.itemContainer}>\n                    <div className={classes.header}>\n                        <DragHandle classes={classes} />\n                        <div className={classes.divider} />\n                        <Tooltip title={<FormattedMessage id=\"Main.lang.delete\" defaultMessage=\"Delete\" />}>\n                            <button className={classes.removeButton} type=\"button\" onClick={onRemove(id)}>\n                                <DeleteIcon className={classes.removeIcon} />\n                            </button>\n                        </Tooltip>\n                        {!isMobile && <div className={classes.divider} />}\n                        <ListItem\n                            button\n                            className={cn(classes.listItem, hasError && classes.listItemError)}\n                            onClick={() => toggleFold(!folded)}\n                        >\n                            <motion.div\n                                className={classes.arrowContainer}\n                                animate={{\n                                    transform: `rotate(${folded ? -90 : 0}deg)`\n                                }}\n                            >\n                                <ArrowIcon className={cn('refinement-arrow')} />\n                            </motion.div>\n                            {hasError && <Twemoji className={classes.warningIcon} svg text=\"⚠️\" />}\n                            <Typography className={classes.smallTitle} color=\"dark\">\n                                {formation.institution}\n                            </Typography>\n                        </ListItem>\n                    </div>\n                    <AnimatePresence>\n                        {!folded && (\n                            <motion.div\n                                variants={STUDIES_CONTENT_TRANSITION_PROPS}\n                                initial=\"initial\"\n                                animate=\"animate\"\n                                exit=\"exit\"\n                                transition={spring}\n                                className={cn(classes.listItem, fieldErrors && classes.listItemError)}\n                            >\n                                <div className={classes.fieldGroup}>\n                                    <div className={classes.field}>\n                                        <TextField\n                                            fullWidth\n                                            variant=\"flat\"\n                                            value={formation.institution}\n                                            onChange={handleInstitutionChange}\n                                            id={`formation_institution_${id}`}\n                                            placeholder={formatMessage(translations.schoolNamePlaceholder)}\n                                        />\n                                        {fieldErrors && fieldErrors.institution && (\n                                            <Typography color=\"danger\" variant=\"helper\" component=\"p\">\n                                                {fieldErrors.institution}\n                                            </Typography>\n                                        )}\n                                    </div>\n                                    <div className={classes.field}>\n                                        <SelectComponent\n                                            onChange={handleEndDate}\n                                            id={formation.id}\n                                            value={formation.endDate}\n                                            classes={classes}\n                                        />\n                                        {fieldErrors && fieldErrors.endDate && (\n                                            <Typography color=\"danger\" variant=\"helper\" component=\"p\">\n                                                {fieldErrors.endDate}\n                                            </Typography>\n                                        )}\n                                    </div>\n                                </div>\n                                <div className={classes.fieldGroup}>\n                                    <div className={classes.field}>\n                                        <TextField\n                                            id={`formation_diploma_${id}`}\n                                            fullWidth\n                                            variant=\"flat\"\n                                            label={formatMessage(translations.diplomaTitle)}\n                                            placeholder={formatMessage(translations.diplomaPlaceholder)}\n                                            value={formation.studyType}\n                                            onChange={handleStudyType}\n                                            margin=\"normal\"\n                                            error={fieldErrors && fieldErrors.studyType}\n                                        />\n\n                                        {fieldErrors && fieldErrors.studyType && (\n                                            <Typography color=\"danger\" variant=\"helper\" component=\"p\">\n                                                {fieldErrors.studyType}\n                                            </Typography>\n                                        )}\n                                    </div>\n                                    <div className={classes.field}>\n                                        <TextField\n                                            id={`formation_area_${id}`}\n                                            fullWidth\n                                            variant=\"flat\"\n                                            label={formatMessage(translations.mainCourse)}\n                                            placeholder={formatMessage(translations.mainCoursePlaceholder)}\n                                            value={formation.area}\n                                            onChange={handleAreaChange}\n                                            margin=\"normal\"\n                                            error={fieldErrors && fieldErrors.area}\n                                        />\n\n                                        {fieldErrors && fieldErrors.area && (\n                                            <Typography color=\"danger\" variant=\"helper\" component=\"p\">\n                                                {fieldErrors.area}\n                                            </Typography>\n                                        )}\n                                    </div>\n                                </div>\n                            </motion.div>\n                        )}\n                    </AnimatePresence>\n                </div>\n            </div>\n        );\n    }\n);\n\nconst SortableFormationsItems = SortableContainer(\n    ({ items, formationChanged, formationDeleted, errors, name, schools, classes }) => {\n        const keyedValues = useMemo(() => keyBy(items, ({ id }) => id), [items]);\n\n        const [foldedState, setFoldState] = useState(\n            Object.keys(keyedValues || {}).reduce((state, id) => {\n                // eslint-disable-next-line no-param-reassign\n                state[id] = true;\n                return state;\n            }, {})\n        );\n\n        const toggleFold = useCallback(\n            (id) => (value) => {\n                const newFoldState = { ...foldedState };\n                newFoldState[id] = value;\n                setFoldState(newFoldState);\n            },\n            [foldedState]\n        );\n        return (\n            <List>\n                {items.map((formation, index) => (\n                    <FormationItem\n                        key={`${name}_${formation.id}_${index}`}\n                        onChange={formationChanged}\n                        onRemove={formationDeleted}\n                        id={formation.id}\n                        formationIndex={index}\n                        error={errors && errors[index]}\n                        toggleFold={toggleFold(formation.id)}\n                        folded={foldedState[formation.id]}\n                        {...{\n                            index,\n                            formation,\n                            schools,\n                            classes\n                        }}\n                    />\n                ))}\n            </List>\n        );\n    }\n);\n\nexport const FormationsEditForm = ({ data, onMove, onAdd, onFieldChange, onDelete, errors }) => {\n    const classes = useStyles();\n    const globalError = typeof errors === 'string' && errors;\n\n    return (\n        <>\n            <SortableFormationsItems\n                lockToContainerEdges\n                helperClass={classes.sortableHelper}\n                items={data}\n                onSortEnd={onMove}\n                distance={20}\n                useDragHandle\n                lockAxis=\"y\"\n                name=\"education\"\n                formationChanged={onFieldChange}\n                formationDeleted={onDelete}\n                errors={errors}\n                {...{ classes }}\n            />\n            <AddButton onClick={onAdd} />\n            {globalError && (\n                <Typography color=\"danger\" component=\"p\">\n                    {errors}\n                </Typography>\n            )}\n        </>\n    );\n};\n\nexport const StudiesCardEditDialog = StudiesCardEditDialogComponent;\n"]},"metadata":{},"sourceType":"module"}