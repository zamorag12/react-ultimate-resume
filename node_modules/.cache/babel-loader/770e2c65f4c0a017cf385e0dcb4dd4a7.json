{"ast":null,"code":"import _slicedToArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useContext,useEffect,useState}from'react';import{FormattedMessage}from'react-intl';import{createUseStyles}from'react-jss';import{useDebounce}from'use-debounce';import{Dialog,DialogActions,DialogContent}from'@material-ui/core';import{Button,TextField,Tooltip}from'@welovedevs/ui';import{DialogTitle}from'../dialog/dialog_title/dialog_title';import{LoadingSpinner}from'../loading_spinner/loading_spinner';import{StaticDataContext}from'../../../utils/context/contexts';import{useUnsplashResults}from'../../hooks/unsplash/use_unsplash_results';import{styles}from'./search_unsplash_result_styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=createUseStyles(styles);var SearchUnsplashDialogComponent=function SearchUnsplashDialogComponent(_ref){var open=_ref.open,onClose=_ref.onClose,onSelect=_ref.onSelect;var classes=useStyles();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useDebounce=useDebounce(query,500),_useDebounce2=_slicedToArray(_useDebounce,1),debouncedQuery=_useDebounce2[0];var handleInputChange=useCallback(function(event){return setQuery(event.target.value);},[]);return/*#__PURE__*/_jsxs(Dialog,{classes:{paper:classes.paper},open:open,onClose:onClose,children:[/*#__PURE__*/_jsx(DialogTitle,{classes:{root:classes.title},children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Unsplash.SearchDialog.Title\",defaultMessage:\"Search pictures from unsplash\"})}),/*#__PURE__*/_jsxs(DialogContent,{classes:{root:classes.content},children:[/*#__PURE__*/_jsx(TextField,{classes:{container:classes.textField},fullWidth:true,onChange:handleInputChange,value:query,variant:\"flat\",placeholder:\"Burrito, development, etc...\"}),/*#__PURE__*/_jsx(Results,{query:query,debouncedQuery:debouncedQuery,onSelect:onSelect,classes:classes})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:onClose,children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Main.lang.close\",defaultMessage:\"Close\"})})})]});};var Results=function Results(_ref2){var query=_ref2.query,debouncedQuery=_ref2.debouncedQuery,onSelect=_ref2.onSelect,classes=_ref2.classes;var _useUnsplashResults=useUnsplashResults(debouncedQuery,0,3*3),results=_useUnsplashResults.results,loadingResults=_useUnsplashResults.loading;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showLoadingSpinner=_useState4[0],setShowLoadingSpinner=_useState4[1];var _useContext=useContext(StaticDataContext),endpoints=_useContext.endpoints;useEffect(function(){if(loadingResults){return;}setShowLoadingSpinner(!!query);},[query]);useEffect(function(){if(loadingResults===true){return;}setShowLoadingSpinner(false);},[results,loadingResults]);var onImageSelected=useCallback(function(_ref3){var description=_ref3.description,urls=_ref3.urls,id=_ref3.id,user=_ref3.user,links=_ref3.links;return function(){onSelect({id:id,url:urls.regular,alt:description,credits:{url:encodeURI(\"\".concat(user.links.html,\"?utm_source=W3D Developer Profile&utm_medium=referral\")),name:user.username},fromUnsplash:true});// eslint-disable-next-line no-undef\nfetch(\"\".concat(endpoints===null||endpoints===void 0?void 0:endpoints.unsplashProxy,\"?url=\").concat(links.download_location));};},[onSelect]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.results,children:[showLoadingSpinner&&/*#__PURE__*/_jsx(LoadingSpinner,{}),!showLoadingSpinner&&(results===null||results===void 0?void 0:results.map(function(_ref4){var id=_ref4.id,urls=_ref4.urls,description=_ref4.description,user=_ref4.user,links=_ref4.links;return/*#__PURE__*/_jsx(Tooltip,{title:\"Select this picture\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.imageContainer,onClick:onImageSelected({description:description,urls:urls,id:id,user:user,links:links}),children:/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:urls.regular,alt:description})},\"result_\".concat(id))},\"unsplash_picture_\".concat(id));}))]});};export var SearchUnsplashDialog=SearchUnsplashDialogComponent;","map":{"version":3,"sources":["/home/gzamora/Documents/test/react-ultimate-resume/src/package/components/commons/search_unsplash_dialog/search_unsplash_result.jsx"],"names":["React","useCallback","useContext","useEffect","useState","FormattedMessage","createUseStyles","useDebounce","Dialog","DialogActions","DialogContent","Button","TextField","Tooltip","DialogTitle","LoadingSpinner","StaticDataContext","useUnsplashResults","styles","useStyles","SearchUnsplashDialogComponent","open","onClose","onSelect","classes","query","setQuery","debouncedQuery","handleInputChange","event","target","value","paper","root","title","content","container","textField","Results","results","loadingResults","loading","showLoadingSpinner","setShowLoadingSpinner","endpoints","onImageSelected","description","urls","id","user","links","url","regular","alt","credits","encodeURI","html","name","username","fromUnsplash","fetch","unsplashProxy","download_location","map","imageContainer","image","SearchUnsplashDialog"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useEffect, useState } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\nimport { createUseStyles } from 'react-jss';\nimport { useDebounce } from 'use-debounce';\n\nimport { Dialog, DialogActions, DialogContent } from '@material-ui/core';\nimport { Button, TextField, Tooltip } from '@welovedevs/ui';\n\nimport { DialogTitle } from '../dialog/dialog_title/dialog_title';\nimport { LoadingSpinner } from '../loading_spinner/loading_spinner';\nimport { StaticDataContext } from '../../../utils/context/contexts';\n\nimport { useUnsplashResults } from '../../hooks/unsplash/use_unsplash_results';\n\nimport { styles } from './search_unsplash_result_styles';\n\nconst useStyles = createUseStyles(styles);\n\nconst SearchUnsplashDialogComponent = ({ open, onClose, onSelect }) => {\n    const classes = useStyles();\n    const [query, setQuery] = useState('');\n    const [debouncedQuery] = useDebounce(query, 500);\n\n    const handleInputChange = useCallback((event) => setQuery(event.target.value), []);\n\n    return (\n        <Dialog\n            classes={{\n                paper: classes.paper\n            }}\n            open={open}\n            onClose={onClose}\n        >\n            <DialogTitle classes={{ root: classes.title }}>\n                <FormattedMessage id=\"Unsplash.SearchDialog.Title\" defaultMessage=\"Search pictures from unsplash\" />\n            </DialogTitle>\n            <DialogContent\n                classes={{\n                    root: classes.content\n                }}\n            >\n                <TextField\n                    classes={{ container: classes.textField }}\n                    fullWidth\n                    onChange={handleInputChange}\n                    value={query}\n                    variant=\"flat\"\n                    placeholder=\"Burrito, development, etc...\"\n                />\n                <Results query={query} debouncedQuery={debouncedQuery} onSelect={onSelect} classes={classes} />\n            </DialogContent>\n            <DialogActions>\n                <Button size=\"small\" onClick={onClose}>\n                    <FormattedMessage id=\"Main.lang.close\" defaultMessage=\"Close\" />\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nconst Results = ({ query, debouncedQuery, onSelect, classes }) => {\n    const { results, loading: loadingResults } = useUnsplashResults(debouncedQuery, 0, 3 * 3);\n    const [showLoadingSpinner, setShowLoadingSpinner] = useState(false);\n    const { endpoints } = useContext(StaticDataContext);\n\n    useEffect(() => {\n        if (loadingResults) {\n            return;\n        }\n        setShowLoadingSpinner(!!query);\n    }, [query]);\n\n    useEffect(() => {\n        if (loadingResults === true) {\n            return;\n        }\n        setShowLoadingSpinner(false);\n    }, [results, loadingResults]);\n\n    const onImageSelected = useCallback(\n        ({ description, urls, id, user, links }) => () => {\n            onSelect({\n                id,\n                url: urls.regular,\n                alt: description,\n                credits: {\n                    url: encodeURI(`${user.links.html}?utm_source=W3D Developer Profile&utm_medium=referral`),\n                    name: user.username\n                },\n                fromUnsplash: true\n            });\n            // eslint-disable-next-line no-undef\n            fetch(`${endpoints?.unsplashProxy}?url=${links.download_location}`);\n        },\n        [onSelect]\n    );\n\n    return (\n        <div className={classes.results}>\n            {showLoadingSpinner && <LoadingSpinner />}\n            {!showLoadingSpinner &&\n                results?.map(({ id, urls, description, user, links }) => (\n                    <Tooltip key={`unsplash_picture_${id}`} title=\"Select this picture\">\n                        <button\n                            key={`result_${id}`}\n                            type=\"button\"\n                            className={classes.imageContainer}\n                            onClick={onImageSelected({ description, urls, id, user, links })}\n                        >\n                            <img className={classes.image} src={urls.regular} alt={description} />\n                        </button>\n                    </Tooltip>\n                ))}\n        </div>\n    );\n};\n\nexport const SearchUnsplashDialog = SearchUnsplashDialogComponent;\n"]},"metadata":{},"sourceType":"module"}