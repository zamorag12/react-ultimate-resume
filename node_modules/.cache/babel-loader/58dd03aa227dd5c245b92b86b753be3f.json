{"ast":null,"code":"import _toConsumableArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{memo,useCallback,useMemo,useRef,useState}from'react';import{FormattedMessage}from'react-intl';import{createUseStyles}from'react-jss';import{ProfileCardTitle}from'../../../../commons/profile_card/profile_card_title/profile_card_title';import SkillsPieChart from'./skills_pie_chart/skills_pie_chart';import OtherSkills from'./other_skills/other_skills';import{styles}from'./skills_back_styles';import{useCardVariant}from'../../../../hooks/profile_card_hooks/use_card_variant';import{existsAndNotEmpty}from'../../../utils/exists_and_not_empty';import{NoSkill}from'./no_skill/no_skill';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=createUseStyles(styles);var SkillsBackComponent=function SkillsBackComponent(_ref){var data=_ref.data,handleAddButtonClick=_ref.handleAddButtonClick;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ProfileCardTitle,{children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Skills.back.title\",defaultMessage:\"Skills\"})}),/*#__PURE__*/_jsx(Content,{data:data,handleAddButtonClick:handleAddButtonClick})]});};var Content=function Content(_ref2){var data=_ref2.data,handleAddButtonClick=_ref2.handleAddButtonClick;var _useCardVariant=useCardVariant(),_useCardVariant2=_slicedToArray(_useCardVariant,1),variant=_useCardVariant2[0];var classes=useStyles({variant:variant});var hasSkill=useMemo(function(){return existsAndNotEmpty(data===null||data===void 0?void 0:data.skills);},[data]);var _useState=useState(1),_useState2=_slicedToArray(_useState,2),onScrollOpacityProps=_useState2[0],setSpringOnScrollOpacityProps=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),translationProps=_useState4[0],setTranslationProps=_useState4[1];var _useMemo=useMemo(function(){var _data$skills;var newData=_toConsumableArray((_data$skills=data.skills)!==null&&_data$skills!==void 0?_data$skills:[]);var top3=newData.splice(0,3);return{top3Skills:top3,othersSkills:newData};},[data]),top3Skills=_useMemo.top3Skills,othersSkills=_useMemo.othersSkills;var onScroll=useCallback(function(e){var newOpacity=Math.max(1-e.target.scrollTop/60,0);if(newOpacity===0){if(othersSkills.length>10){setTranslationProps(-100);}else{setTranslationProps(-100+(e.target.scrollTop>160&&e.target.scrollTop-160));}}else{setTranslationProps(0);}return setSpringOnScrollOpacityProps(newOpacity);},[othersSkills]);if(!hasSkill){return/*#__PURE__*/_jsx(NoSkill,{handleAddButtonClick:handleAddButtonClick});}return/*#__PURE__*/_jsxs(\"div\",{className:classes.container,onScroll:onScroll,children:[/*#__PURE__*/_jsx(SkillsPieChart,{variant:variant,data:top3Skills,onScrollOpacityProps:onScrollOpacityProps}),othersSkills.length>1&&/*#__PURE__*/_jsx(OtherSkills,{motionProps:{animate:{y:translationProps}},othersSkills:othersSkills})]});};export var SkillsBack=/*#__PURE__*/memo(SkillsBackComponent);","map":{"version":3,"sources":["/home/gzamora/Documents/test/react-ultimate-resume/src/package/components/cards/cards_types/skills/skills_back/skills_back.jsx"],"names":["React","memo","useCallback","useMemo","useRef","useState","FormattedMessage","createUseStyles","ProfileCardTitle","SkillsPieChart","OtherSkills","styles","useCardVariant","existsAndNotEmpty","NoSkill","useStyles","SkillsBackComponent","data","handleAddButtonClick","Content","variant","classes","hasSkill","skills","onScrollOpacityProps","setSpringOnScrollOpacityProps","translationProps","setTranslationProps","newData","top3","splice","top3Skills","othersSkills","onScroll","e","newOpacity","Math","max","target","scrollTop","length","container","animate","y","SkillsBack"],"mappings":"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","sourcesContent":["import React, { memo, useCallback, useMemo, useRef, useState } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\nimport { createUseStyles } from 'react-jss';\n\nimport { ProfileCardTitle } from '../../../../commons/profile_card/profile_card_title/profile_card_title';\n\nimport SkillsPieChart from './skills_pie_chart/skills_pie_chart';\nimport OtherSkills from './other_skills/other_skills';\n\nimport { styles } from './skills_back_styles';\nimport { useCardVariant } from '../../../../hooks/profile_card_hooks/use_card_variant';\nimport { existsAndNotEmpty } from '../../../utils/exists_and_not_empty';\nimport { NoSkill } from './no_skill/no_skill';\n\nconst useStyles = createUseStyles(styles);\n\nconst SkillsBackComponent = ({ data, handleAddButtonClick }) => (\n    <>\n        <ProfileCardTitle>\n            <FormattedMessage id=\"Skills.back.title\" defaultMessage=\"Skills\" />\n        </ProfileCardTitle>\n        <Content {...{ data, handleAddButtonClick }} />\n    </>\n);\n\nconst Content = ({ data, handleAddButtonClick }) => {\n    const [variant] = useCardVariant();\n\n    const classes = useStyles({ variant });\n\n    const hasSkill = useMemo(() => existsAndNotEmpty(data?.skills), [data]);\n\n    const [onScrollOpacityProps, setSpringOnScrollOpacityProps] = useState(1);\n    const [translationProps, setTranslationProps] = useState(0);\n\n    const { top3Skills, othersSkills } = useMemo(() => {\n        const newData = [...(data.skills ?? [])];\n        const top3 = newData.splice(0, 3);\n        return {\n            top3Skills: top3,\n            othersSkills: newData\n        };\n    }, [data]);\n\n    const onScroll = useCallback(\n        (e) => {\n            const newOpacity = Math.max(1 - e.target.scrollTop / 60, 0);\n\n            if (newOpacity === 0) {\n                if (othersSkills.length > 10) {\n                    setTranslationProps(-100);\n                } else {\n                    setTranslationProps(-100 + (e.target.scrollTop > 160 && e.target.scrollTop - 160));\n                }\n            } else {\n                setTranslationProps(0);\n            }\n\n            return setSpringOnScrollOpacityProps(newOpacity);\n        },\n        [othersSkills]\n    );\n\n    if (!hasSkill) {\n        return <NoSkill {...{ handleAddButtonClick }} />;\n    }\n\n    return (\n        <div className={classes.container} onScroll={onScroll}>\n            <SkillsPieChart variant={variant} data={top3Skills} onScrollOpacityProps={onScrollOpacityProps} />\n            {othersSkills.length > 1 && (\n                <OtherSkills\n                    motionProps={{\n                        animate: {\n                            y: translationProps\n                        }\n                    }}\n                    othersSkills={othersSkills}\n                />\n            )}\n        </div>\n    );\n};\nexport const SkillsBack = memo(SkillsBackComponent);\n"]},"metadata":{},"sourceType":"module"}