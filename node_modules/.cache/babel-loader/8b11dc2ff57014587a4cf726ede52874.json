{"ast":null,"code":"import _objectSpread from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useCallback,useMemo}from'react';import cn from'classnames';import{FormattedMessage,useIntl}from'react-intl';import{arrayMove,SortableContainer,SortableElement,SortableHandle}from'react-sortable-hoc';import uuid from'uuid/v4';import{List,TextField,Tooltip,Typography}from'@welovedevs/ui';import useMediaQuery from'@material-ui/core/useMediaQuery/useMediaQuery';import{useFormikContext}from'formik';import{createUseStyles,useTheme}from'react-jss';import{EditDialog}from'../../../../commons/edit_dialog/edit_dialog';import{SliderWithPopper}from'../../../../commons/slider_with_popper/slider_with_popper';import{AddButton}from'../../../../commons/add_button/add_button';import{ReactComponent as MoveIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../../../assets/icons/move_list.svg\";import{ReactComponent as TrashIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../../../assets/icons/trash.svg\";import translations from'./languages_edit_dialog_translations';import{styles}from'./languages_edit_dialog_styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=createUseStyles(styles);var LanguagesCardEditDialogComponent=function LanguagesCardEditDialogComponent(_ref){var open=_ref.open,onClose=_ref.onClose,data=_ref.data,onEdit=_ref.onEdit,validationSchema=_ref.validationSchema,isEditing=_ref.isEditing;var _useIntl=useIntl(),formatMessage=_useIntl.formatMessage;var validationSchemaToPass=useMemo(function(){return validationSchema(formatMessage);},[validationSchema]);return/*#__PURE__*/_jsx(EditDialog,{open:open,onClose:onClose,data:data,isEditing:isEditing,onEdit:onEdit,validationSchema:validationSchemaToPass,title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Languages.editDialog.title\",defaultMessage:\"Your languages\"}),children:function children(helpers){return/*#__PURE__*/_jsx(LanguagesEditFormWrapper,{helpers:helpers});}});};var LanguageItem=SortableElement(function(_ref2){var id=_ref2.id,language=_ref2.language,onChange=_ref2.onChange,onRemove=_ref2.onRemove,fieldErrors=_ref2.error,classes=_ref2.classes,index=_ref2.languageIndex;var _useIntl2=useIntl(),formatMessage=_useIntl2.formatMessage;var theme=useTheme();var isMobile=useMediaQuery(\"(max-width: \".concat(theme.screenSizes.small,\"px)\"));var handleLanguageChange=useCallback(function(e){return onChange(index,'language',e.target.value);},[index]);var handleValueChange=useCallback(function(e){return onChange(index,'value',Number(e.target.value));},[index]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.itemContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(DragHandle,{classes:classes}),/*#__PURE__*/_jsx(\"div\",{className:classes.divider}),/*#__PURE__*/_jsx(Tooltip,{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Main.lang.delete\",defaultMessage:\"Delete\"}),children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.button,onClick:onRemove(id),children:/*#__PURE__*/_jsx(TrashIcon,{className:classes.removeIcon})})}),!isMobile&&/*#__PURE__*/_jsx(\"div\",{className:classes.divider})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.listItem,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.fieldGroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.field,children:[/*#__PURE__*/_jsx(Typography,{color:\"dark\",variant:\"label\",children:formatMessage(translations.language)}),/*#__PURE__*/_jsx(TextField,{value:language.language,onChange:handleLanguageChange,id:\"language_language_\".concat(id),placeholder:formatMessage(translations.languagePlaceholder),variant:\"flat\"}),fieldErrors&&fieldErrors.language&&/*#__PURE__*/_jsx(Typography,{color:\"danger\",variant:\"helper\",component:\"p\",children:fieldErrors.language})]}),/*#__PURE__*/_jsxs(\"div\",{className:cn(classes.field,classes.sliderValueContainer),children:[/*#__PURE__*/_jsx(Typography,{classes:{container:classes.sliderValue},color:\"dark\",variant:\"label\",children:formatMessage(translations.level,{valueNode:/*#__PURE__*/_jsx(\"span\",{className:classes.bolden,children:language.value})})}),/*#__PURE__*/_jsx(SliderWithPopper,{color:\"primary\",name:\"value\",value:language.value,onChange:handleValueChange,min:0,max:100,className:classes.slider,popperCardProps:{classes:{container:classes.sliderPopperCard,arrowContainer:classes.sliderPopperCardArrowContainer}}}),fieldErrors&&fieldErrors.value&&/*#__PURE__*/_jsx(Typography,{color:\"danger\",variant:\"helper\",component:\"p\",children:fieldErrors.value})]})]})})]});});var SortableLanguagesItems=SortableContainer(function(_ref3){var items=_ref3.items,onChange=_ref3.onChange,onDelete=_ref3.onDelete,errors=_ref3.errors,name=_ref3.name,schools=_ref3.schools,classes=_ref3.classes;return/*#__PURE__*/_jsx(List,{children:items===null||items===void 0?void 0:items.map(function(language,index){return/*#__PURE__*/_jsx(LanguageItem,{onChange:onChange,onRemove:onDelete,id:language.id,languageIndex:index,error:errors&&errors[index],index:index,language:language,schools:schools,classes:classes},\"\".concat(name,\"_\").concat(language.id,\"_\").concat(index));})});});var DragHandle=SortableHandle(function(_ref4){var classes=_ref4.classes;return/*#__PURE__*/_jsx(\"button\",{type:\"button\",children:/*#__PURE__*/_jsx(MoveIcon,{className:classes.dragHandle})});});export var LanguagesEditForm=function LanguagesEditForm(_ref5){var data=_ref5.data,onMove=_ref5.onMove,onValueChange=_ref5.onValueChange,onDelete=_ref5.onDelete,onAdd=_ref5.onAdd,validationErrors=_ref5.errors;var classes=useStyles();var globalError=typeof validationErrors==='string'&&validationErrors;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SortableLanguagesItems,{useDragHandle:true,lockToContainerEdges:true,helperClass:classes.sortableHelper,items:data,onSortEnd:onMove,distance:20,lockAxis:\"y\",name:\"education\",onChange:onValueChange,onDelete:onDelete,errors:validationErrors,classes:classes}),/*#__PURE__*/_jsx(AddButton,{onClick:onAdd}),globalError&&/*#__PURE__*/_jsx(Typography,{color:\"danger\",component:\"p\",children:validationErrors})]});};var LanguagesEditFormWrapper=function LanguagesEditFormWrapper(_ref6){var handleValueChange=_ref6.helpers.handleValueChange;var _useFormikContext=useFormikContext(),languages=_useFormikContext.values.languages,validationErrors=_useFormikContext.errors;var languageChanged=useCallback(function(experienceIndex,field,value){handleValueChange(\"languages[\".concat(experienceIndex,\"].\").concat(field))(value);},[]);var languageDeleted=useCallback(function(deletingId){return function(){handleValueChange('languages')(languages.filter(function(_ref7){var id=_ref7.id;return deletingId!==id;}));};},[languages]);var addLanguage=useCallback(function(){var _languages$length;var id=uuid();handleValueChange('languages')([].concat(_toConsumableArray(languages!==null&&languages!==void 0?languages:[]),[{index:(_languages$length=languages===null||languages===void 0?void 0:languages.length)!==null&&_languages$length!==void 0?_languages$length:0,id:id}]));},[JSON.stringify(languages)]);var move=useCallback(function(_ref8){var oldIndex=_ref8.oldIndex,newIndex=_ref8.newIndex;handleValueChange('languages')(arrayMove(languages,oldIndex,newIndex).map(function(data,index){return _objectSpread(_objectSpread({},data),{},{index:index});}));},[languages]);return/*#__PURE__*/_jsx(LanguagesEditForm,{data:languages,onMove:move,onValueChange:languageChanged,onDelete:languageDeleted,onAdd:addLanguage,errors:validationErrors===null||validationErrors===void 0?void 0:validationErrors.languages});};export var LanguagesCardEditDialog=LanguagesCardEditDialogComponent;","map":{"version":3,"sources":["/home/gzamora/Documents/test/react-ultimate-resume/src/package/components/cards/cards_types/languages/languages_edit_dialog/languages_card_edit_dialog.jsx"],"names":["React","useCallback","useMemo","cn","FormattedMessage","useIntl","arrayMove","SortableContainer","SortableElement","SortableHandle","uuid","List","TextField","Tooltip","Typography","useMediaQuery","useFormikContext","createUseStyles","useTheme","EditDialog","SliderWithPopper","AddButton","translations","styles","useStyles","LanguagesCardEditDialogComponent","open","onClose","data","onEdit","validationSchema","isEditing","formatMessage","validationSchemaToPass","helpers","LanguageItem","id","language","onChange","onRemove","fieldErrors","error","classes","index","languageIndex","theme","isMobile","screenSizes","small","handleLanguageChange","e","target","value","handleValueChange","Number","itemContainer","actions","divider","button","removeIcon","listItem","fieldGroup","field","languagePlaceholder","sliderValueContainer","container","sliderValue","level","valueNode","bolden","slider","sliderPopperCard","arrowContainer","sliderPopperCardArrowContainer","SortableLanguagesItems","items","onDelete","errors","name","schools","map","DragHandle","dragHandle","LanguagesEditForm","onMove","onValueChange","onAdd","validationErrors","globalError","sortableHelper","LanguagesEditFormWrapper","languages","values","languageChanged","experienceIndex","languageDeleted","deletingId","filter","addLanguage","length","JSON","stringify","move","oldIndex","newIndex","LanguagesCardEditDialog"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo } from 'react';\n\nimport cn from 'classnames';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { arrayMove, SortableContainer, SortableElement, SortableHandle } from 'react-sortable-hoc';\n\nimport uuid from 'uuid/v4';\n\nimport { List, TextField, Tooltip, Typography } from '@welovedevs/ui';\nimport useMediaQuery from '@material-ui/core/useMediaQuery/useMediaQuery';\n\nimport { useFormikContext } from 'formik';\nimport { createUseStyles, useTheme } from 'react-jss';\nimport { EditDialog } from '../../../../commons/edit_dialog/edit_dialog';\nimport { SliderWithPopper } from '../../../../commons/slider_with_popper/slider_with_popper';\nimport { AddButton } from '../../../../commons/add_button/add_button';\n\nimport { ReactComponent as MoveIcon } from '../../../../../assets/icons/move_list.svg';\nimport { ReactComponent as TrashIcon } from '../../../../../assets/icons/trash.svg';\n\nimport translations from './languages_edit_dialog_translations';\nimport { styles } from './languages_edit_dialog_styles';\n\nconst useStyles = createUseStyles(styles);\n\nconst LanguagesCardEditDialogComponent = ({ open, onClose, data, onEdit, validationSchema, isEditing }) => {\n    const { formatMessage } = useIntl();\n    const validationSchemaToPass = useMemo(() => validationSchema(formatMessage), [validationSchema]);\n\n    return (\n        <EditDialog\n            open={open}\n            onClose={onClose}\n            data={data}\n            isEditing={isEditing}\n            onEdit={onEdit}\n            validationSchema={validationSchemaToPass}\n            title={<FormattedMessage id=\"Languages.editDialog.title\" defaultMessage=\"Your languages\" />}\n        >\n            {(helpers) => <LanguagesEditFormWrapper helpers={helpers} />}\n        </EditDialog>\n    );\n};\n\nconst LanguageItem = SortableElement(\n    ({ id, language, onChange, onRemove, error: fieldErrors, classes, languageIndex: index }) => {\n        const { formatMessage } = useIntl();\n        const theme = useTheme();\n        const isMobile = useMediaQuery(`(max-width: ${theme.screenSizes.small}px)`);\n\n        const handleLanguageChange = useCallback((e) => onChange(index, 'language', e.target.value), [index]);\n        const handleValueChange = useCallback((e) => onChange(index, 'value', Number(e.target.value)), [index]);\n\n        return (\n            <div className={classes.itemContainer}>\n                <div className={classes.actions}>\n                    <DragHandle {...{ classes }} />\n                    <div className={classes.divider} />\n                    <Tooltip title={<FormattedMessage id=\"Main.lang.delete\" defaultMessage=\"Delete\" />}>\n                        <button type=\"button\" className={classes.button} onClick={onRemove(id)}>\n                            <TrashIcon className={classes.removeIcon} />\n                        </button>\n                    </Tooltip>\n                    {!isMobile && <div className={classes.divider} />}\n                </div>\n                <div className={classes.listItem}>\n                    <div className={classes.fieldGroup}>\n                        <div className={classes.field}>\n                            <Typography color=\"dark\" variant=\"label\">\n                                {formatMessage(translations.language)}\n                            </Typography>\n                            <TextField\n                                value={language.language}\n                                onChange={handleLanguageChange}\n                                id={`language_language_${id}`}\n                                placeholder={formatMessage(translations.languagePlaceholder)}\n                                variant=\"flat\"\n                            />\n                            {fieldErrors && fieldErrors.language && (\n                                <Typography color=\"danger\" variant=\"helper\" component=\"p\">\n                                    {fieldErrors.language}\n                                </Typography>\n                            )}\n                        </div>\n                        <div className={cn(classes.field, classes.sliderValueContainer)}>\n                            <Typography\n                                classes={{\n                                    container: classes.sliderValue\n                                }}\n                                color=\"dark\"\n                                variant=\"label\"\n                            >\n                                {formatMessage(translations.level, {\n                                    valueNode: <span className={classes.bolden}>{language.value}</span>\n                                })}\n                            </Typography>\n                            <SliderWithPopper\n                                color=\"primary\"\n                                name=\"value\"\n                                value={language.value}\n                                onChange={handleValueChange}\n                                min={0}\n                                max={100}\n                                className={classes.slider}\n                                popperCardProps={{\n                                    classes: {\n                                        container: classes.sliderPopperCard,\n                                        arrowContainer: classes.sliderPopperCardArrowContainer\n                                    }\n                                }}\n                            />\n                            {fieldErrors && fieldErrors.value && (\n                                <Typography color=\"danger\" variant=\"helper\" component=\"p\">\n                                    {fieldErrors.value}\n                                </Typography>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n);\n\nconst SortableLanguagesItems = SortableContainer(({ items, onChange, onDelete, errors, name, schools, classes }) => (\n    <List>\n        {items?.map((language, index) => (\n            <LanguageItem\n                key={`${name}_${language.id}_${index}`}\n                onChange={onChange}\n                onRemove={onDelete}\n                id={language.id}\n                languageIndex={index}\n                error={errors && errors[index]}\n                {...{\n                    index,\n                    language,\n                    schools,\n                    classes\n                }}\n            />\n        ))}\n    </List>\n));\n\nconst DragHandle = SortableHandle(({ classes }) => (\n    <button type=\"button\">\n        <MoveIcon className={classes.dragHandle} />\n    </button>\n));\n\nexport const LanguagesEditForm = ({ data, onMove, onValueChange, onDelete, onAdd, errors: validationErrors }) => {\n    const classes = useStyles();\n    const globalError = typeof validationErrors === 'string' && validationErrors;\n\n    return (\n        <>\n            <SortableLanguagesItems\n                useDragHandle\n                lockToContainerEdges\n                helperClass={classes.sortableHelper}\n                items={data}\n                onSortEnd={onMove}\n                distance={20}\n                lockAxis=\"y\"\n                name=\"education\"\n                onChange={onValueChange}\n                onDelete={onDelete}\n                errors={validationErrors}\n                {...{ classes }}\n            />\n            <AddButton onClick={onAdd} />\n            {globalError && (\n                <Typography color=\"danger\" component=\"p\">\n                    {validationErrors}\n                </Typography>\n            )}\n        </>\n    );\n};\n\nconst LanguagesEditFormWrapper = ({ helpers: { handleValueChange } }) => {\n    const {\n        values: { languages },\n        errors: validationErrors\n    } = useFormikContext();\n\n    const languageChanged = useCallback((experienceIndex, field, value) => {\n        handleValueChange(`languages[${experienceIndex}].${field}`)(value);\n    }, []);\n    const languageDeleted = useCallback(\n        (deletingId) => () => {\n            handleValueChange('languages')(languages.filter(({ id }) => deletingId !== id));\n        },\n        [languages]\n    );\n\n    const addLanguage = useCallback(() => {\n        const id = uuid();\n        handleValueChange('languages')([\n            ...(languages ?? []),\n            {\n                index: languages?.length ?? 0,\n                id\n            }\n        ]);\n    }, [JSON.stringify(languages)]);\n\n    const move = useCallback(\n        ({ oldIndex, newIndex }) => {\n            handleValueChange('languages')(\n                arrayMove(languages, oldIndex, newIndex).map((data, index) => ({ ...data, index }))\n            );\n        },\n        [languages]\n    );\n\n    return (\n        <LanguagesEditForm\n            data={languages}\n            onMove={move}\n            onValueChange={languageChanged}\n            onDelete={languageDeleted}\n            onAdd={addLanguage}\n            errors={validationErrors?.languages}\n        />\n    );\n};\n\nexport const LanguagesCardEditDialog = LanguagesCardEditDialogComponent;\n"]},"metadata":{},"sourceType":"module"}