{"ast":null,"code":"import aliases from './aliases';\nimport parentLocales from './parentLocales';\nimport { invariant } from './invariant';\n/**\n * https://tc39.es/ecma262/#sec-toobject\n * @param arg\n */\n\nexport function toObject(arg) {\n  if (arg == null) {\n    throw new TypeError('undefined/null cannot be converted to object');\n  }\n\n  return Object(arg);\n}\n/**\n * https://tc39.es/ecma262/#sec-tostring\n */\n\nexport function toString(o) {\n  // Only symbol is irregular...\n  if (typeof o === 'symbol') {\n    throw TypeError('Cannot convert a Symbol value to a string');\n  }\n\n  return String(o);\n}\n/**\n * https://tc39.es/ecma402/#sec-getoption\n * @param opts\n * @param prop\n * @param type\n * @param values\n * @param fallback\n */\n\nexport function getOption(opts, prop, type, values, fallback) {\n  // const descriptor = Object.getOwnPropertyDescriptor(opts, prop);\n  var value = opts[prop];\n\n  if (value !== undefined) {\n    if (type !== 'boolean' && type !== 'string') {\n      throw new TypeError('invalid type');\n    }\n\n    if (type === 'boolean') {\n      value = Boolean(value);\n    }\n\n    if (type === 'string') {\n      value = toString(value);\n    }\n\n    if (values !== undefined && !values.filter(function (val) {\n      return val == value;\n    }).length) {\n      throw new RangeError(value + \" is not within \" + values.join(', '));\n    }\n\n    return value;\n  }\n\n  return fallback;\n}\n/**\n * https://tc39.es/ecma402/#sec-defaultnumberoption\n * @param val\n * @param min\n * @param max\n * @param fallback\n */\n\nexport function defaultNumberOption(val, min, max, fallback) {\n  if (val !== undefined) {\n    val = Number(val);\n\n    if (isNaN(val) || val < min || val > max) {\n      throw new RangeError(val + \" is outside of range [\" + min + \", \" + max + \"]\");\n    }\n\n    return Math.floor(val);\n  }\n\n  return fallback;\n}\n/**\n * https://tc39.es/ecma402/#sec-getnumberoption\n * @param options\n * @param property\n * @param min\n * @param max\n * @param fallback\n */\n\nexport function getNumberOption(options, property, minimum, maximum, fallback) {\n  var val = options[property];\n  return defaultNumberOption(val, minimum, maximum, fallback);\n}\nexport function getAliasesByLang(lang) {\n  return Object.keys(aliases).reduce(function (all, locale) {\n    if (locale.split('-')[0] === lang) {\n      all[locale] = aliases[locale];\n    }\n\n    return all;\n  }, {});\n}\nexport function getParentLocalesByLang(lang) {\n  return Object.keys(parentLocales).reduce(function (all, locale) {\n    if (locale.split('-')[0] === lang) {\n      all[locale] = parentLocales[locale];\n    }\n\n    return all;\n  }, {});\n}\nexport function setInternalSlot(map, pl, field, value) {\n  if (!map.get(pl)) {\n    map.set(pl, Object.create(null));\n  }\n\n  var slots = map.get(pl);\n  slots[field] = value;\n}\nexport function setMultiInternalSlots(map, pl, props) {\n  for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\n    var k = _a[_i];\n    setInternalSlot(map, pl, k, props[k]);\n  }\n}\nexport function getInternalSlot(map, pl, field) {\n  return getMultiInternalSlots(map, pl, field)[field];\n}\nexport function getMultiInternalSlots(map, pl) {\n  var fields = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    fields[_i - 2] = arguments[_i];\n  }\n\n  var slots = map.get(pl);\n\n  if (!slots) {\n    throw new TypeError(pl + \" InternalSlot has not been initialized\");\n  }\n\n  return fields.reduce(function (all, f) {\n    all[f] = slots[f];\n    return all;\n  }, Object.create(null));\n}\nexport function isLiteralPart(patternPart) {\n  return patternPart.type === 'literal';\n}\nexport function partitionPattern(pattern) {\n  var result = [];\n  var beginIndex = pattern.indexOf('{');\n  var endIndex = 0;\n  var nextIndex = 0;\n  var length = pattern.length;\n\n  while (beginIndex < pattern.length && beginIndex > -1) {\n    endIndex = pattern.indexOf('}', beginIndex);\n    invariant(endIndex > beginIndex, \"Invalid pattern \" + pattern);\n\n    if (beginIndex > nextIndex) {\n      result.push({\n        type: 'literal',\n        value: pattern.substring(nextIndex, beginIndex)\n      });\n    }\n\n    result.push({\n      type: pattern.substring(beginIndex + 1, endIndex),\n      value: undefined\n    });\n    nextIndex = endIndex + 1;\n    beginIndex = pattern.indexOf('{', nextIndex);\n  }\n\n  if (nextIndex < length) {\n    result.push({\n      type: 'literal',\n      value: pattern.substring(nextIndex, length)\n    });\n  }\n\n  return result;\n}\n/**\n * https://tc39.es/ecma402/#sec-setnfdigitoptions\n * https://tc39.es/proposal-unified-intl-numberformat/section11/numberformat_diff_out.html#sec-setnfdigitoptions\n * @param intlObj\n * @param opts\n * @param mnfdDefault\n * @param mxfdDefault\n */\n\nexport function setNumberFormatDigitOptions(internalSlotMap, intlObj, opts, mnfdDefault, mxfdDefault) {\n  var mnid = getNumberOption(opts, 'minimumIntegerDigits', 1, 21, 1);\n  var mnfd = opts.minimumFractionDigits;\n  var mxfd = opts.maximumFractionDigits;\n  var mnsd = opts.minimumSignificantDigits;\n  var mxsd = opts.maximumSignificantDigits;\n  setInternalSlot(internalSlotMap, intlObj, 'minimumIntegerDigits', mnid);\n\n  if (mnsd !== undefined || mxsd !== undefined) {\n    setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'significantDigits');\n    mnsd = defaultNumberOption(mnsd, 1, 21, 1);\n    mxsd = defaultNumberOption(mxsd, mnsd, 21, 21);\n    setInternalSlot(internalSlotMap, intlObj, 'minimumSignificantDigits', mnsd);\n    setInternalSlot(internalSlotMap, intlObj, 'maximumSignificantDigits', mxsd);\n  } else if (mnfd !== undefined || mxfd !== undefined) {\n    setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'fractionDigits');\n    mnfd = defaultNumberOption(mnfd, 0, 20, mnfdDefault);\n    var mxfdActualDefault = Math.max(mnfd, mxfdDefault);\n    mxfd = defaultNumberOption(mxfd, mnfd, 20, mxfdActualDefault);\n    setInternalSlot(internalSlotMap, intlObj, 'minimumFractionDigits', mnfd);\n    setInternalSlot(internalSlotMap, intlObj, 'maximumFractionDigits', mxfd);\n  } else if (getInternalSlot(internalSlotMap, intlObj, 'notation') === 'compact') {\n    setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'compactRounding');\n  } else {\n    setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'fractionDigits');\n    setInternalSlot(internalSlotMap, intlObj, 'minimumFractionDigits', mnfdDefault);\n    setInternalSlot(internalSlotMap, intlObj, 'maximumFractionDigits', mxfdDefault);\n  }\n}\nexport function objectIs(x, y) {\n  if (Object.is) {\n    return Object.is(x, y);\n  } // SameValue algorithm\n\n\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    return x !== 0 || 1 / x === 1 / y;\n  } // Step 6.a: NaN == NaN\n\n\n  return x !== x && y !== y;\n}\nvar NOT_A_Z_REGEX = /[^A-Z]/;\n/**\n * This follows https://tc39.es/ecma402/#sec-case-sensitivity-and-case-mapping\n * @param str string to convert\n */\n\nfunction toUpperCase(str) {\n  return str.replace(/([a-z])/g, function (_, c) {\n    return c.toUpperCase();\n  });\n}\n/**\n * https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-iswellformedcurrencycode\n * @param currency\n */\n\n\nexport function isWellFormedCurrencyCode(currency) {\n  currency = toUpperCase(currency);\n\n  if (currency.length !== 3) {\n    return false;\n  }\n\n  if (NOT_A_Z_REGEX.test(currency)) {\n    return false;\n  }\n\n  return true;\n}","map":{"version":3,"sources":["../src/polyfill-utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import aliases from './aliases';\nimport parentLocales from './parentLocales';\nimport { invariant } from './invariant';\n/**\n * https://tc39.es/ecma262/#sec-toobject\n * @param arg\n */\nexport function toObject(arg) {\n    if (arg == null) {\n        throw new TypeError('undefined/null cannot be converted to object');\n    }\n    return Object(arg);\n}\n/**\n * https://tc39.es/ecma262/#sec-tostring\n */\nexport function toString(o) {\n    // Only symbol is irregular...\n    if (typeof o === 'symbol') {\n        throw TypeError('Cannot convert a Symbol value to a string');\n    }\n    return String(o);\n}\n/**\n * https://tc39.es/ecma402/#sec-getoption\n * @param opts\n * @param prop\n * @param type\n * @param values\n * @param fallback\n */\nexport function getOption(opts, prop, type, values, fallback) {\n    // const descriptor = Object.getOwnPropertyDescriptor(opts, prop);\n    var value = opts[prop];\n    if (value !== undefined) {\n        if (type !== 'boolean' && type !== 'string') {\n            throw new TypeError('invalid type');\n        }\n        if (type === 'boolean') {\n            value = Boolean(value);\n        }\n        if (type === 'string') {\n            value = toString(value);\n        }\n        if (values !== undefined && !values.filter(function (val) { return val == value; }).length) {\n            throw new RangeError(value + \" is not within \" + values.join(', '));\n        }\n        return value;\n    }\n    return fallback;\n}\n/**\n * https://tc39.es/ecma402/#sec-defaultnumberoption\n * @param val\n * @param min\n * @param max\n * @param fallback\n */\nexport function defaultNumberOption(val, min, max, fallback) {\n    if (val !== undefined) {\n        val = Number(val);\n        if (isNaN(val) || val < min || val > max) {\n            throw new RangeError(val + \" is outside of range [\" + min + \", \" + max + \"]\");\n        }\n        return Math.floor(val);\n    }\n    return fallback;\n}\n/**\n * https://tc39.es/ecma402/#sec-getnumberoption\n * @param options\n * @param property\n * @param min\n * @param max\n * @param fallback\n */\nexport function getNumberOption(options, property, minimum, maximum, fallback) {\n    var val = options[property];\n    return defaultNumberOption(val, minimum, maximum, fallback);\n}\nexport function getAliasesByLang(lang) {\n    return Object.keys(aliases).reduce(function (all, locale) {\n        if (locale.split('-')[0] === lang) {\n            all[locale] = aliases[locale];\n        }\n        return all;\n    }, {});\n}\nexport function getParentLocalesByLang(lang) {\n    return Object.keys(parentLocales).reduce(function (all, locale) {\n        if (locale.split('-')[0] === lang) {\n            all[locale] = parentLocales[locale];\n        }\n        return all;\n    }, {});\n}\nexport function setInternalSlot(map, pl, field, value) {\n    if (!map.get(pl)) {\n        map.set(pl, Object.create(null));\n    }\n    var slots = map.get(pl);\n    slots[field] = value;\n}\nexport function setMultiInternalSlots(map, pl, props) {\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\n        var k = _a[_i];\n        setInternalSlot(map, pl, k, props[k]);\n    }\n}\nexport function getInternalSlot(map, pl, field) {\n    return getMultiInternalSlots(map, pl, field)[field];\n}\nexport function getMultiInternalSlots(map, pl) {\n    var fields = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        fields[_i - 2] = arguments[_i];\n    }\n    var slots = map.get(pl);\n    if (!slots) {\n        throw new TypeError(pl + \" InternalSlot has not been initialized\");\n    }\n    return fields.reduce(function (all, f) {\n        all[f] = slots[f];\n        return all;\n    }, Object.create(null));\n}\nexport function isLiteralPart(patternPart) {\n    return patternPart.type === 'literal';\n}\nexport function partitionPattern(pattern) {\n    var result = [];\n    var beginIndex = pattern.indexOf('{');\n    var endIndex = 0;\n    var nextIndex = 0;\n    var length = pattern.length;\n    while (beginIndex < pattern.length && beginIndex > -1) {\n        endIndex = pattern.indexOf('}', beginIndex);\n        invariant(endIndex > beginIndex, \"Invalid pattern \" + pattern);\n        if (beginIndex > nextIndex) {\n            result.push({\n                type: 'literal',\n                value: pattern.substring(nextIndex, beginIndex),\n            });\n        }\n        result.push({\n            type: pattern.substring(beginIndex + 1, endIndex),\n            value: undefined,\n        });\n        nextIndex = endIndex + 1;\n        beginIndex = pattern.indexOf('{', nextIndex);\n    }\n    if (nextIndex < length) {\n        result.push({\n            type: 'literal',\n            value: pattern.substring(nextIndex, length),\n        });\n    }\n    return result;\n}\n/**\n * https://tc39.es/ecma402/#sec-setnfdigitoptions\n * https://tc39.es/proposal-unified-intl-numberformat/section11/numberformat_diff_out.html#sec-setnfdigitoptions\n * @param intlObj\n * @param opts\n * @param mnfdDefault\n * @param mxfdDefault\n */\nexport function setNumberFormatDigitOptions(internalSlotMap, intlObj, opts, mnfdDefault, mxfdDefault) {\n    var mnid = getNumberOption(opts, 'minimumIntegerDigits', 1, 21, 1);\n    var mnfd = opts.minimumFractionDigits;\n    var mxfd = opts.maximumFractionDigits;\n    var mnsd = opts.minimumSignificantDigits;\n    var mxsd = opts.maximumSignificantDigits;\n    setInternalSlot(internalSlotMap, intlObj, 'minimumIntegerDigits', mnid);\n    if (mnsd !== undefined || mxsd !== undefined) {\n        setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'significantDigits');\n        mnsd = defaultNumberOption(mnsd, 1, 21, 1);\n        mxsd = defaultNumberOption(mxsd, mnsd, 21, 21);\n        setInternalSlot(internalSlotMap, intlObj, 'minimumSignificantDigits', mnsd);\n        setInternalSlot(internalSlotMap, intlObj, 'maximumSignificantDigits', mxsd);\n    }\n    else if (mnfd !== undefined || mxfd !== undefined) {\n        setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'fractionDigits');\n        mnfd = defaultNumberOption(mnfd, 0, 20, mnfdDefault);\n        var mxfdActualDefault = Math.max(mnfd, mxfdDefault);\n        mxfd = defaultNumberOption(mxfd, mnfd, 20, mxfdActualDefault);\n        setInternalSlot(internalSlotMap, intlObj, 'minimumFractionDigits', mnfd);\n        setInternalSlot(internalSlotMap, intlObj, 'maximumFractionDigits', mxfd);\n    }\n    else if (getInternalSlot(internalSlotMap, intlObj, 'notation') === 'compact') {\n        setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'compactRounding');\n    }\n    else {\n        setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'fractionDigits');\n        setInternalSlot(internalSlotMap, intlObj, 'minimumFractionDigits', mnfdDefault);\n        setInternalSlot(internalSlotMap, intlObj, 'maximumFractionDigits', mxfdDefault);\n    }\n}\nexport function objectIs(x, y) {\n    if (Object.is) {\n        return Object.is(x, y);\n    }\n    // SameValue algorithm\n    if (x === y) {\n        // Steps 1-5, 7-10\n        // Steps 6.b-6.e: +0 != -0\n        return x !== 0 || 1 / x === 1 / y;\n    }\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n}\nvar NOT_A_Z_REGEX = /[^A-Z]/;\n/**\n * This follows https://tc39.es/ecma402/#sec-case-sensitivity-and-case-mapping\n * @param str string to convert\n */\nfunction toUpperCase(str) {\n    return str.replace(/([a-z])/g, function (_, c) { return c.toUpperCase(); });\n}\n/**\n * https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-iswellformedcurrencycode\n * @param currency\n */\nexport function isWellFormedCurrencyCode(currency) {\n    currency = toUpperCase(currency);\n    if (currency.length !== 3) {\n        return false;\n    }\n    if (NOT_A_Z_REGEX.test(currency)) {\n        return false;\n    }\n    return true;\n}\n//# sourceMappingURL=polyfill-utils.js.map"]},"metadata":{},"sourceType":"module"}