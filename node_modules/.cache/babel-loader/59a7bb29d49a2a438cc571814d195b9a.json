{"ast":null,"code":"import _regeneratorRuntime from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/gzamora/Documents/test/react-ultimate-resume/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useContext,useEffect,useState}from'react';import{createUseStyles,ThemeProvider,useTheme}from'react-jss';import{FormattedMessage}from'react-intl';import set from'lodash/set';import cloneDeep from'lodash/cloneDeep';import{Button}from'@welovedevs/ui';import{Dialog,DialogActions,DialogContent,useMediaQuery}from'@material-ui/core';import{DialogTitle}from'../../../commons/dialog/dialog_title/dialog_title';import{CardsOrderer}from'./card_orderer/cards_orderer';import{PalettesList}from'./palettes_list/palettes_list';import{buildTheme}from'../../../../utils/styles/theme/theme';import{DeveloperProfileContext}from'../../../../utils/context/contexts';import{styles}from'./customize_dialog_styles';import{createScreenWidthMediaQuery}from'../../../../utils/styles/styles_utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=createUseStyles(styles);var CustomizeDialogComponent=function CustomizeDialogComponent(_ref){var _value$theme;var open=_ref.open,onClose=_ref.onClose,customizationOptions=_ref.customizationOptions;var theme=useTheme();var onlyShowPalettesList=useMediaQuery(createScreenWidthMediaQuery('max-width',theme.screenSizes.small),{defaultMatches:true});var classes=useStyles({onlyShowPalettesList:onlyShowPalettesList});var _useState=useState(customizationOptions),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),builtTheme=_useState4[0],setBuiltTheme=_useState4[1];var _useContext=useContext(DeveloperProfileContext),onCustomizationChanged=_useContext.onCustomizationChanged;useEffect(function(){setValue(customizationOptions);},[customizationOptions]);useEffect(function(){var asyncBuild=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var built;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return buildTheme(value===null||value===void 0?void 0:value.theme);case 2:built=_context.sent;setBuiltTheme(built);case 4:case\"end\":return _context.stop();}}},_callee);}));return function asyncBuild(){return _ref2.apply(this,arguments);};}();asyncBuild();},[JSON.stringify(value===null||value===void 0?void 0:value.theme)]);var onSave=useCallback(function(){if(typeof onCustomizationChanged==='function'){onCustomizationChanged(value);}onClose();},[value]);var onPaletteChanged=useCallback(function(palette){var newCustomization=cloneDeep(value||{});set(newCustomization,'theme.palette',palette);setValue(newCustomization);if(onlyShowPalettesList&&typeof onCustomizationChanged==='function'){onCustomizationChanged(newCustomization);onClose();}},[value,onlyShowPalettesList,onSave]);var onCardOrdered=useCallback(function(cardsOrder){var newCustomization=cloneDeep(value||{});newCustomization.cardsOrder=cardsOrder;setValue(newCustomization);},[value]);return/*#__PURE__*/_jsxs(Dialog,{fullScreen:true,open:open,classes:{root:classes.root,paper:classes.paper},onClose:onClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Banner.actions.customize.dialog.title\",defaultMessage:\"Customize your profile\"})}),/*#__PURE__*/_jsxs(DialogContent,{classes:{root:classes.content},children:[/*#__PURE__*/_jsx(PalettesList,{classes:{container:classes.palettesList},onChange:onPaletteChanged,value:value===null||value===void 0?void 0:(_value$theme=value.theme)===null||_value$theme===void 0?void 0:_value$theme.palette}),!onlyShowPalettesList&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:classes.dividerContainer,children:/*#__PURE__*/_jsx(\"div\",{className:classes.divider})}),/*#__PURE__*/_jsx(ThemeProvider,{theme:builtTheme,children:/*#__PURE__*/_jsx(CardsOrderer,{onChange:onCardOrdered,value:value===null||value===void 0?void 0:value.cardsOrder})})]})]}),/*#__PURE__*/_jsxs(DialogActions,{classes:{root:classes.actions},children:[/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:onClose,children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Main.lang.close\",deaultMessage:\"Close\"})}),/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"contained\",size:\"small\",onClick:onSave,children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"Main.lang.save\",defaultMessage:\"Save\"})})]})]});};export var CustomizeDialog=CustomizeDialogComponent;","map":{"version":3,"sources":["/home/gzamora/Documents/test/react-ultimate-resume/src/package/components/banner/user_actions_row/customize_dialog/customize_dialog.jsx"],"names":["React","useCallback","useContext","useEffect","useState","createUseStyles","ThemeProvider","useTheme","FormattedMessage","set","cloneDeep","Button","Dialog","DialogActions","DialogContent","useMediaQuery","DialogTitle","CardsOrderer","PalettesList","buildTheme","DeveloperProfileContext","styles","createScreenWidthMediaQuery","useStyles","CustomizeDialogComponent","open","onClose","customizationOptions","theme","onlyShowPalettesList","screenSizes","small","defaultMatches","classes","value","setValue","builtTheme","setBuiltTheme","onCustomizationChanged","asyncBuild","built","JSON","stringify","onSave","onPaletteChanged","palette","newCustomization","onCardOrdered","cardsOrder","root","paper","content","container","palettesList","dividerContainer","divider","actions","CustomizeDialog"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useEffect, useState } from 'react';\n\nimport { createUseStyles, ThemeProvider, useTheme } from 'react-jss';\nimport { FormattedMessage } from 'react-intl';\nimport set from 'lodash/set';\nimport cloneDeep from 'lodash/cloneDeep';\n\nimport { Button } from '@welovedevs/ui';\n\nimport { Dialog, DialogActions, DialogContent, useMediaQuery } from '@material-ui/core';\n\nimport { DialogTitle } from '../../../commons/dialog/dialog_title/dialog_title';\nimport { CardsOrderer } from './card_orderer/cards_orderer';\nimport { PalettesList } from './palettes_list/palettes_list';\n\nimport { buildTheme } from '../../../../utils/styles/theme/theme';\nimport { DeveloperProfileContext } from '../../../../utils/context/contexts';\n\nimport { styles } from './customize_dialog_styles';\nimport { createScreenWidthMediaQuery } from '../../../../utils/styles/styles_utils';\n\nconst useStyles = createUseStyles(styles);\n\nconst CustomizeDialogComponent = ({ open, onClose, customizationOptions }) => {\n    const theme = useTheme();\n    const onlyShowPalettesList = useMediaQuery(createScreenWidthMediaQuery('max-width', theme.screenSizes.small), {\n        defaultMatches: true\n    });\n    const classes = useStyles({ onlyShowPalettesList });\n    const [value, setValue] = useState(customizationOptions);\n    const [builtTheme, setBuiltTheme] = useState({});\n    const { onCustomizationChanged } = useContext(DeveloperProfileContext);\n\n    useEffect(() => {\n        setValue(customizationOptions);\n    }, [customizationOptions]);\n\n    useEffect(() => {\n        const asyncBuild = async () => {\n            const built = await buildTheme(value?.theme);\n            setBuiltTheme(built);\n        };\n        asyncBuild();\n    }, [JSON.stringify(value?.theme)]);\n\n    const onSave = useCallback(() => {\n        if (typeof onCustomizationChanged === 'function') {\n            onCustomizationChanged(value);\n        }\n        onClose();\n    }, [value]);\n\n    const onPaletteChanged = useCallback(\n        (palette) => {\n            const newCustomization = cloneDeep(value || {});\n            set(newCustomization, 'theme.palette', palette);\n            setValue(newCustomization);\n            if (onlyShowPalettesList && typeof onCustomizationChanged === 'function') {\n                onCustomizationChanged(newCustomization);\n                onClose();\n            }\n        },\n        [value, onlyShowPalettesList, onSave]\n    );\n\n    const onCardOrdered = useCallback(\n        (cardsOrder) => {\n            const newCustomization = cloneDeep(value || {});\n            newCustomization.cardsOrder = cardsOrder;\n            setValue(newCustomization);\n        },\n        [value]\n    );\n\n    return (\n        <Dialog\n            fullScreen\n            open={open}\n            classes={{\n                root: classes.root,\n                paper: classes.paper\n            }}\n            onClose={onClose}\n        >\n            <DialogTitle>\n                <FormattedMessage id=\"Banner.actions.customize.dialog.title\" defaultMessage=\"Customize your profile\" />\n            </DialogTitle>\n            <DialogContent\n                classes={{\n                    root: classes.content\n                }}\n            >\n                <PalettesList\n                    classes={{\n                        container: classes.palettesList\n                    }}\n                    onChange={onPaletteChanged}\n                    value={value?.theme?.palette}\n                />\n                {!onlyShowPalettesList && (\n                    <>\n                        <div className={classes.dividerContainer}>\n                            <div className={classes.divider} />\n                        </div>\n                        <ThemeProvider theme={builtTheme}>\n                            <CardsOrderer onChange={onCardOrdered} value={value?.cardsOrder} />\n                        </ThemeProvider>\n                    </>\n                )}\n            </DialogContent>\n            <DialogActions\n                classes={{\n                    root: classes.actions\n                }}\n            >\n                <Button size=\"small\" onClick={onClose}>\n                    <FormattedMessage id=\"Main.lang.close\" deaultMessage=\"Close\" />\n                </Button>\n                <Button color=\"primary\" variant=\"contained\" size=\"small\" onClick={onSave}>\n                    <FormattedMessage id=\"Main.lang.save\" defaultMessage=\"Save\" />\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nexport const CustomizeDialog = CustomizeDialogComponent;\n"]},"metadata":{},"sourceType":"module"}